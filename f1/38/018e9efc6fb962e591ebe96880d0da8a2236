おそらく r42039 のあたりの Hash#flatten の最適化で Hash#flatten に負の数を引数
として渡した時の挙動が変化してしまっていたのを修正しています。 [ruby-dev:47988]
[Bug #9533]
