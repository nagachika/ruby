Signal.trap で定義したトラップハンドラ内で Thread#join を実行すると再入した時に
デッドロックが発生する問題の対処として rb_thread_t::in_trap というメンバを追加
して、トラップハンドラ内であることを保持するようにして、トラップハンドラ内での
Thread#join は ThreadError を発生させるようにしています。 [ruby-core:44956]
[Bug #6416]
このようにトラップハンドラ内で禁止される操作が定義されていくんでしょうか。トラ
ップハンドラの再入を禁止するという方法もあるなと思うのですが。と思っていたら
r37861 でトラップハンドラに再入しないようにされてました。
