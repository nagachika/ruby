vm.c の vm_exec_handle_exception() if 文内で共通の処理を goto で共有していたのをブロックの先頭で必要な type のセットだけ分岐(というか配列の参照による書き換え)で対応するようにリファクタリングしています。こんな配列の宣言のしかたははじめてみた。古めのコンパイラで通るかな…。 https://github.com/ruby/ruby/pull/3247
