クラスオブジェクトを確保するところでオブジェクトをスロットから確保する前に
rb_classext_t の構造体用のメモリを確保しているため、オブジェクト確保で例外が発
生した場合に(メモリエラー?)メモリリークするので後に確保するようにしています。し
かしこれだと今度は rb_classext_t の確保時に GC が走る可能性があって、ptr が
NULL の struct RClass がマークされてしまって SEGV という現象が起きてしまいます
。
