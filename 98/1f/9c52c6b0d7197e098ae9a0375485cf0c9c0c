$LOADED_FEATURE に文字列以外のオブジェクトが入っていて SEGV した時に backtrace
を表示するためにそのオブジェクトに to_str を呼ぶことがあって、そこで例外や大域
脱出があると SEGV のハンドラから抜けてしまうという問題があって、StringValueCStr
() は使わず、オブジェクトが T_STRING 型ならそのままバッファを参照して、文字列じ
ゃなかったらクラス名と VALUE の値で表示するようにしています。 [ruby-core:49573]
[Bug #7402]
