拡張ライブラリ json でネストのチェックのため? に使われる JSON::SAFE_STATE_PROTOTYPE という定数に格納される JSON::State のオブジェクトを dup でコピーして使ってたのですが、特にそうする理由もなさそうなので単に JSON::State のオブジェクトを新規作成して使うようにしてこの定数は削除しています。おそらく Ractor safe にするためグローバルな参照されるオブジェクトがあると面倒だったからでしょう。
