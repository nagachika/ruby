メインスレッド以外の Thread で fork すると終了時にうまくプロセスが終了してくれ
ないという不具合を修正しています。 thread_start_func_2() でスレッド終了時に自分
がメインスレッドだった時(普通はそんなことはないのですが、fork でできた子プロセ
スでは Thread が fork 時にメインスレッドに変化することがありえる)は ruby_stop()
を呼んで停止するようにしています。こんな不具合が入ってたとは…よくこれまで気が
つかなかったですね。。。 [ruby-core:62070] [Bug #9751]
