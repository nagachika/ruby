長い文字列に 8bit 目の立っているバイトが含まれていると ASCII-8BIT (つまりバイナ
リ)のエンコーディングであってもそこから文字のバイト幅を検出する処理が入ってしま
って gsub などが遅くなるという問題への対処です。エンコーディングが UTF-8 とかだ
と必要な処理なのでしかたないのだろうと思うのですが、ASCII-8BIT の場合はチェック
不要なので条件分岐を修正しています。 [ruby-dev:45688] [Bug #6509]
