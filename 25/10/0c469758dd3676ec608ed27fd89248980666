後置 in 記法によるパターンマッチで in の左辺(って言うのかな)の式について value_expr() を呼んで値を返す式になってるかチェック(return とか break とかの処理フローを制御するのはダメとか)するようにしています。
