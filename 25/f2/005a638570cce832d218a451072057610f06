コミットログによると Windows 上で VSCode で Samba 上の ruby スクリプトを編集中にそのファイルを実行すると require_relative がエラーになってしまうので、大元の rb_cloexec_open() でファイルディスクリプタを open(2) で開く時に EAGAIN を捕捉して何回かリトライするようにしています。sleep(0) とかしててなかなか大胆、というかこれはちょっといまいちですね。たぶん Samba 上のファイルということなので保存が走ったタイミングとかで open できない瞬間があったりするんでしょうけど、うーん……。
