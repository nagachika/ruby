rb_vm_t::frozen_strings に作る fstring を登録しておく st_table の初期サイズを 1000 から 10000 に増やしています。コミットログをみるとたんに ruby 起動して拡張ライブラリ objspace をロードした状態で既に 6000 近く fstring が作られてるので 1000 だと起動時に必ず拡張が入るからとのこと。なるほど。オプションなしで rubygems など組込まれていますしね。
