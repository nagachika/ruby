知らなかったのですが nil::C のように nil に対して定数の探索ができてたみたいで、動機はよくわからないのですが VM 命令の getconstant に scope として nil を許容するかどうかを指定するオペランドを追加して構文的な定数アクセスの時には許容しないように修正しています。 [ruby-core:71598] [Bug #11718]
