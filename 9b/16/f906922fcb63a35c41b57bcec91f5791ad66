process.c で Process.spawn や system、 popen などで fork(2) のかわりに vfork(2)
を利用するようにしています。 vfork() はメモリ空間のコピー( 正確には CoW なので
ページテーブルのコピー)をせずに fork() するシステムコールで、fork した子プロセ
スがすぐに exec するのでコピーが不要(なおかつ子プロセスで親プロセスのメモリを不
用意に壊したりしないなど注意が必要、ですが ruby の spawn の実装は子プロセスで実
行する内容が async-signal-safe になるようにしているので大丈夫なのだと思います)
なのでより高速に子プロセスを起動できます。特にたくさんメモリを使っているプロセ
スの時に効果的です。
