拡張ライブラリ bigdecimal の構造体 Real のメモリ確保の時に末尾の可変長配列の宣
言サイズによらずきっちり必要なだけ確保するようにリファクタリングしています。こ
れまでは sizeof(Real) に frac の配列の必要なサイズぶんを確保していたので、frac
が長さ1の配列として宣言されていた場合 BDIGIT ひとつぶん余計にメモリが確保されて
いたんですね。あと offsetof() というマクロが stddef.h で標準で用意されていたと
は知りませんでした。似たようなのを定義して使ってたような。
