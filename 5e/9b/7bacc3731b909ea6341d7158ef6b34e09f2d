include/ruby/util.h にビット数を渡して10進数表記した時の桁数を返すマクロ
DECIMAL_SIZE_OF_BITS() を追加して昨日 r44558 で修正した BigMath.log のバッファ
サイズ決定や、その他にも useq.c でも利用するようにしています。 ceil(n * log10
(2)) の近似値ってことで一次式 (((n) * 3010 + 9998) / 9999) が利用されています(n
<= 65536)。
