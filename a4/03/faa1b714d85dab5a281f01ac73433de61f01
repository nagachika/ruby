r61899 で parse.y で必須キーワードの処理で REQUIRED_KEYWORD というマクロを導入
して不正なキャストを避けるようにしていましたが、ここでは ripper 用の処理は DSL
を使って明示的に処理を別に書くようにして、assignable() という関数の引数を本体と
ripper 用で分けるようにしています。
