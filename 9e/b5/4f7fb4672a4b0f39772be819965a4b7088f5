RB_GC_GUARD() の定義に inline assembler で空の(コメントのみの)命令を書いて、入
力オペランドにメモリ指定で rb_gc_guarded_ptr を書いておくようにしています。これ
でより rb_gc_guarded_ptr が最適化されにくくなるということですね。どうやら gcc 7
で最適化がより強くなったのに対応しているみたいです。
