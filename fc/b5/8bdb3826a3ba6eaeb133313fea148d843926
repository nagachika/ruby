mkmf.rb でコマンド実行時に RbConfig になかった変数の参照を環境変数で展開するの
が変数ごとに1回しか展開されていなかったので、複数回展開できるようにしています。
また with_framework のテストで $@ を String#sub で1回だけ置換していたのを gsub
で全て置換するようにしています。 Mac OS X で mkmf.rb のテストが失敗していたのを
修正しているようです。 [ruby-core:56253] [Bug #8702]
