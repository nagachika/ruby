拡張ライブラリ io/console のテストで子プロセス起動時の -I オプションにテスト実行中に load されてる io/console のパスと同じものを切り出して指定するようにしています。 うーむなるほど。どっちかというとテストのファイルが所属してる場所のほうがいいんじゃなかろうか(ruby 添付と gem 単独でディレクトリ構成が違いそう)。
