パターンマッチに Struct を渡した時の deconstruct_keys メソッドの実装で、パターンマッチに指定されたキーの数より構造体の属性の数が少なかったらどうせマッチしないので中間オブジェクトを作らずすぐに空の Hash オブジェクトを返すようにしています。
