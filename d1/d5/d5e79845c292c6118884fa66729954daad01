タイマースレッドが定期的に起きてスレッドの切り替えを促す動作を、切り替えを待つ
スレッドが存在しない時には抑制するパッチがコミットされています。
[ruby-core:33456] [ruby-dev:43835]
コミットメッセージによりますと、タイマースレッドの不要な動作を止めるのは省エネ
ルギーのためで、ある計測では 0.2W (おそらくW/hour?)の消費電力の節約になったそう
です。 rb_thread_wakeup_timer_thread() という関数を追加して GVL を取得する(実行
待ちになる)時やシグナルを受信したり Thread#kill した時にも pipe を利用してタイ
マースレッドへ通知してまた polling モードにするようにしています。
