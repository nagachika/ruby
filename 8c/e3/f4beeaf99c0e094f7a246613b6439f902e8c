io.c で READ_CHAR_PENDING_COUNT() および READ_CHAR_PENDING_PTR() というマクロの
内容を直接書いていた箇所をマクロを利用するように書き変えたり RSTRING_END() を使
うようにしたりといったリファクタリング。 searchlen の代入箇所が変化していますが
if 文の条件部で代入を書くのは若干まぎらわしいので直前の宣言と同時に代入してやっ
たほうがいいかなぁという気がします。
