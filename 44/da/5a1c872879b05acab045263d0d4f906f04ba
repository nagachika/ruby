ext/ripper/eventids2.c の token_to_eventid というトークンと種類を示すインデックスとの対応テーブルをトップレベルの static 変数として格納していたのを ripper_token2eventid() 内の static 変数に移動して、インデックス(オフセット)のみを並べた配列として定義してループで探索せず一発で lookup できるようにリファクタリングしています。この初期化子の書きかたおもしろいんだけど標準なんだろうか。
