拡張ライブラリ bigdecimal の BigDecimal_DoDivmod() で引数を BigDecimal に変換するのに直接 rb_float_convert_to_BigDecimal()/rb_rational_convert_to_BigDecimal() などの関数を利用するようにリファクタリングしています。
