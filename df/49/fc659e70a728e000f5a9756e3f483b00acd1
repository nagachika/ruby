String#each_grapheme_cluster と String#grapheme_clusters というメソッドを新規追
加しています、これは文字列を文字(書記素クラスタ)ごとに分割して yield したり配列
を返したりするメソッドですが、chars は codepoint 毎に分割されるけど UTF-8 (
Unicode?)では複数の文字を結合して1つの文字にしたりする場合があるので、そのひと
まとまり(書記素クラスタ)を一緒にするように分けるためのものだそうです。絵文字の
扱いがうまくできるようになるのかな。 [ruby-core:82233] [Feature #13780]
