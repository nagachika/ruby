IO#read(length, outbuf) のように read に第2引数として読み込み先の String を渡し
た場合に、入力待ちをしている状態で先に outbuf のサイズを length バイトに伸長し
ていたため、別のスレッドから outbuf を見たり例外で入力を止めた時にゴミがはいっ
た状態の文字列が見えてしまっていたので、実際に読み込めてからサイズを読み込んだ
サイズにセットするようにしています。
