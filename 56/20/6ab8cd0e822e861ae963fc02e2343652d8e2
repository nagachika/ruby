WEBrick::HTTPResponse#send_body_io で IO オブジェクトをレスポンスの body として
渡した時に IO#read でその内容を読んでいたので、IO オブジェクトの種類によっては
バッファサイズ単位で無用にブロックしてしまう可能性があったので、IO#readpartial
を利用して読めるところまで読んでその都度送信するようにしています。また関連する
テストを追加しています。 [ruby-dev:45471] [Bug #6230]
