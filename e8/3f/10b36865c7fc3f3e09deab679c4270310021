snprintf(3) に %s で埋め込む文字列を書き込むバッファそのものにして末尾追記などをしていたのを避けるようにしています。未定義挙動なので保証がないみたいでした。
