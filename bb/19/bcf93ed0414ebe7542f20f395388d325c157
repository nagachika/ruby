シンボルのテーブルに登録する関数 register_symid() から String オブジェクトを生
成してからの処理を register_symid_str() として切り出してこれを利用するようにリ
ファクタリングしています。既に String オブジェクトが渡されている rb_intern_str
() ではわざわざこれを再度 C の文字列として渡す必要がなくなります。
