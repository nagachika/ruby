拡張ライブラリ fiddle で MemoryView が使えるかどうかを RUBY_API_VERSION_MAJOR が 3以降かどうかで判定するようにしています。ヘッダのチェックだと誤って利用中の ruby とは別の ruby のヘッダをみてしまうかもしれないから、みたいなことが書かれてますが、それ間違えてたら RUBY_API_VERSION_MAJOR も間違う気はする。 https://github.com/ruby/fiddle/issues/84
