rubyspec の C API テスト用拡張ライブラリをビルドするための extconf.rb を生成する時に $warnflags に直接コンパイラオプションを追加するのではなく append_cflags メソッドを利用するようにしています。実際に使えるかどうかチェックしてから追加するメソッドみたいです。
