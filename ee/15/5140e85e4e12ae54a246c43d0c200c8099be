標準添付ライブラリ optparse.rb で OptionParser#on の最後の引数でオプションの引
数として受け付ける値として整数を指定する時のチェックの正規表現が文字終端を指定
しないものだったため不正な文字も受け付けていたことや、整数化に to_i を使ってい
たため常に 10進数として解釈されていたので prefix に応じて 2進数、8進数、16進数
などの表記も正しく整数化できるように Integer() を使うように修正しています。
[ruby-core:57024] [Bug #8865]
これは元々からですが Float を変化するのに eval() を使ってるんですが Float() じ
ゃだめなんでしょうか。
