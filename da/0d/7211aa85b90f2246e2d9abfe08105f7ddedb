標準添付ライブラリ reline の Reline::LineEditor のオートインデント機能で行の途中に改行を追加した? 時の対応を追加しています。
