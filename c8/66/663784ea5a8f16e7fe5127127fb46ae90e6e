io.c で定義している NUM2IOCTLREQ() というマクロで NUM2INT() のかわりに NUM2LONG() を int にキャストしたものを使うようにしています。これは ioctl(2) に渡す引数を作るためのマクロで引数は int であるにもかかわらず一部の環境では int の範囲を超えた定数が使われることがあるのでその対策とのこと。ひえー。
