rb_intern() は include/ruby/ruby.h で gcc の拡張機能で引数のリテラル(定数)だと
わかったら RUBY_CONST_ID_CACHE() というマクロを使って static 変数にキャッシュを
作って何度も処理しなくてすむようにする仕組みが作られていますが、各ソースファイ
ルの Init_xxx() 内で rb_intern() しているところは、起動時や拡張ライブラリのロー
ドに1回呼ばれるだけで、キャッシュの意味はあまりないので、 #undef rb_intern して
この自動キャッシュ機能を迂回するようにしています。逆に拡張ライブラリ readline
では CONST_ID() マクロを明示的に使ってキャッシュを使ってるところがありましたが
、ここは rb_intern() の呼び出しに変更しています。
