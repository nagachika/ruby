標準添付ライブラリ reline の Reline::LineEditor#rerender で複数行バッファがあった時に端末の表示できる範囲内だけを描画すると、おそらく仮想端末エミュレーターなどでスクロールバックできる時に遡れないからか、最後の行まで到達した時に範囲内に収まらない上のほうも出力しておくようにしているようです。いろいろ考えることがあって大変だなー。
