TracePoint のコールバック実行時の rb_thread_t::errinfo の保護とコールバック実行
中に再度コールバックが呼ばれた時のチェックを通常のイベントと internal なイベン
トで変更しているようです。例外情報は internal なイベントでは復旧させないように
していています。おそらく internal なイベントのコールバックは C 実装であることが
前提になっているので、そこで大域脱出を起こすようなコードはサポートしないとする
ことで高速に呼び出せるようにしているのではないかと推測します。 ChangeLog には再
入のチェック(イベントのコールバック中に別のイベントのコールバックを実行しないよ
うにするチェック?)についてもなにやら書かれているのですが、通常のイベントのフッ
クの実行中は他のフックは実行しないようにしていたのですが、internal なイベントの
フックは呼び出すようにしているそうです。
