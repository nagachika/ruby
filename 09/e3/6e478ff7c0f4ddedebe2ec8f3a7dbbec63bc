r46709 の続き。上書きすべき行の長さに最後の行のサイズをセットしておくように修正
しています。0で初期化していたので上書きされてなかったみたいです。
