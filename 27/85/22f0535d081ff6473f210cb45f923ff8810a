irb の色つき出力のための IRB::ColorPrinter で pp を再定義して引数が文字列の時に PP#pp を使わないようにしています。 2.4 以降の String#pretty_print を使いたくないからとのこと。テストをみるに改行コードが含まれてた時の挙動のためみたいですね。
