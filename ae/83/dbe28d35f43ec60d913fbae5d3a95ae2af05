標準添付ライブラリ reline の Reline::ANSI.getc で IO#select を使ってたのをやめて IO#getbyte を呼ぶようにしています。 getbyte だとブロックしない?
[追記]よくみると元のコードが IO#select が nil を返した時に next を呼んで busy loop してたので読めるようになるまで抜けないという意味だと同じ(どっちかというとより悪い)でした。これ break の間違いだったんじゃないかなぁ。[/追記]
[再追記]呼び元の Reline::Core#read_io が読めない時に nil がかえってくることを想定した作りじゃないのでそもそも non blocking なことを期待されてないのでは、みたいな感じでした。なんかうまく辻褄が合ってなさそうですね。[/再追記]
