r44562 で拡張ライブラリ bigdecimal が利用しているビット数と10進数表記した時の桁
数を取得するマクロを include/ruby/util.h に移動したのですが、bigdecimal は gem
パッケージ化されているため、古い ruby でビルドしようとすることもあって、その時
にコンパイルできないという問題がありました。 DECIMAL_SIZE_OF_BITS() が未定義だ
ったら bigdecimal のソースにも自前の定義をもっておいてそれを利用するように対策
しています。またフォーマット文字列で VALUE をそのまま埋め込む PRIsVALUE は 1.9
にはないので、こちらも例外メッセージの作成処理を PRIsVALUE が未定義の時の代替の
実装も用意して古い ruby でも動くようにしています。 [ruby-core:59750] [Bug #
9406]
