Enumerator.produce というメソッドを新規追加しています。引数に初期値を受け取りブロックを繰り返し評価した結果が各要素になる Enumerator を生成して返すというものです。基本的には無限リストみたいな終端のない Enumerator になるみたいですがブロック内で StopIteration 例外を発生させると終了もできるようです。つまりひとつ前の値に依存して次の値が決まる(依存しなくてもいいけど)ようなのを簡単に作れるようにしてるわけですね。マルコフ連鎖がシンプルに書けそう。 [ruby-core:87222] [Feature #14781]
