String#inspect でダミーエンコーディング(UTF-16, UTF-32)の文字列の時に BOM 付き
だったらこれを解釈して実際のエンコーディング(BE/LE 付き)を利用するようにしてい
ます……しかし元々そのような処理はあって、それを get_actual_encoding() に切り出
しているようにみえるのでどこが修正されたのかぱっとわからないです。
[ruby-core:59757] [Bug #8940]
[追記]エンコーディングを index から取得する時に must_encindex() を呼び出す
rb_enc_get_from_index() を使うようにしたことで、エンコーディングの autoload を
利用するようにしたとのことでした。[/追記]
