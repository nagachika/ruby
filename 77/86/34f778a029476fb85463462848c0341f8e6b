標準添付ライブラリ reline の Reline::LineEditor でキー入力を UTF-8 として Encode してみて変換できない文字は無視するようにしています。変換したものを使うわけではないので結果の Encoding は変えないけど、UTF-8 に変換できないような文字は捨てるってことですね。
