Bigdecimal の Real 構造体の仮数部の配列 frac は可変長の配列で宣言上のサイズは 1
だけど実際は必要なサイズが確保されるという使われかたなのですが、clang でここの
第2要素に決め打ちでアクセスしているところで警告メッセージが出てしまうというころ
で gcc かどうかで宣言する時の配列サイズを変えています。 [ruby-core:41418] [Bug#
5693]
うーんでもこれだと gcc の時はサイズ0 でそうでない時は 1(これまでと同じ)なので、
これでは clang の警告は収まらないような気がするんですがどうでしょうか。
[2011-12-02 追記]教えていただいたところによると clang でも __GNUC__ は定義され
るのだそうです。で配列サイズが 0 で宣言されていればコンパイラが可変長の配列であ
ることを認識してくれるので警告が出ないということでしょう。[/追記]
