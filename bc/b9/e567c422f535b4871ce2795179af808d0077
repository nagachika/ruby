tmpdir ライブラリで追加される Dir.tmpdir, Dir.mktmpdir で一時ディレクトリを作成
する時に、親ディレクトリが world-writable なパーミッションでさらに sticky bit
も立っていないような時はセキュリティ上の危険があるため、そこを一時ディレクトリ
置き場として利用しないようにしています。また後始末で削除する時も同様にチェック
して危険だったら削除せず例外を発生させるようにして、
FileUtils.remove_entry_secure を使っていたのを FileUtils.remove_entry で削除す
るようにしています。日曜日の開発者会議で話題に上っていたもののようですがわたし
は途中からきいていたのでちょっと定かではありませんが、JRuby で
FileUtils.remove_entry_secure の処理のなかでうまくできないものがあって使わない
ようにしたいというようなことだったようです。
