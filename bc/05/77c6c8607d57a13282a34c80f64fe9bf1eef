require を並列に実行した時に同じファイルを重複してロードしてしまわないように排
他制御するために使っている ThreadShield(r36320 で Barrier から改名したもの)のロ
ック時の処理においてエラーになることがあったのを修正しています。まだ Mutex が作
成されていない ThreadShield が取得できた時にそれを st_delete() で削除していたの
を消さないようにしています。よくわかりませんが登録したスレッドが消すはずだから
ここで消すとまずいということでしょうか。 [ruby-core:50645] [Bug #7530]
