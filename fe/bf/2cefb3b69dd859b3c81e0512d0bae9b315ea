IO#write で書き込むファイルの存在するディスクがディスクフルでも、Errno::ENOSPC
が発生せずになにごともなくかえってきてしまうという不具合を修正しています。
io_close() で rb_rescue() を使って IO#close の呼び出しする時にその時に発生中の
例外などを握り潰してしまっていたので、"closed stream" というメッセージをもつ
IOError 例外のみ吸収するようにチェックを厳密にしています。 [ruby-core:64463]
[Bug #10153]
