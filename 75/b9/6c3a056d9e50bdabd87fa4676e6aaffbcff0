rb_gc_register_mark_object() の最初に渡された VALUE がオブジェクト用の heap 内へのポインタじゃなかった時に無視する条件分岐を追加しています。 33d6e92e0c6eaf1308ce7108e653c53bb5fb106c() で rb_define_const() から呼ばれるようになったのでその影響で即値が渡された時にも呼ばれるのでそういうのを弾く必要ができたみたいです。ふーむ、なるほど。
