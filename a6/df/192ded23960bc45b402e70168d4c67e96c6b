r58791 の Tempfile.create の変更で File.identical? で開いているファイルとファイ
ルパスが同じものかどうかチェックするのが、File オブジェクトが閉じられていると失
敗するので closed? でチェックするようにしています。
