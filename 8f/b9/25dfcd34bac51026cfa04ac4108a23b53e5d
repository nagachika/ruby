r45451 で String#sub や #gsub などの文字列置換のメソッドでパターンを文字列で渡
した時に後方参照用のオブジェクトを確保しないようにする修正によりマルチバイト文
字を含む文字列のときに置換がうまくいかなくなっていた不具合が入っていたようで、
これを修正しています。 rb_str_index() に文字単位でなくバイト単位で比較する挙動
を強制する引数を追加して rb_strseq_index() という関数名に変更して、
rb_pat_search() からはこれに 1 を渡して呼ぶようにしています。文字サイズを無視し
たほうがいいというのはちょっと不思議ですね。 [ruby-core:62669] [Bug #9849]
