Apple の gcc 4.2 での警告の抑制のため何箇所か明示的なキャストの追加と変数の型の
変更をしています。
