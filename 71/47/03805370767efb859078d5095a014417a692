thread_start_func_2() で th->ec のマシンスタックのアドレスとサイズをセットするところで STACK_GROW_DIR_DETECTION および STACK_DIR_UPPER を使ってマシンスタックの伸びる向きを意識してセットするようにしています。またサイズから VM スタックサイズを減らしている…ということはマシンスタックと VM スタックを一度に確保するようにしているんですねこれは。
