ruby_atomic.h に ATOMIC_SIZE_CAS() の定義を追加しています。 ATOMIC_CAS() と同じ
実装で __atomic_compare_exchange_n() を利用しています。また ATOMIC_CAS() のほう
もポインタ変数を使っていたところを対象の型の変数を元の値の格納に直接使うように
リファクタリングしています。なんでポインタを使うように書かれていたんでしょうね
。いかにも意味ありげなのでちょっと気になります。 & 演算子でポインタ化することで
レジスタでなくてメモリ上に置かれることを強制するためかなぁ。
