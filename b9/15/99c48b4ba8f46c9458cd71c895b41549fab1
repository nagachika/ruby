ensure 節に 0 if false みたいに最適化によって命令が消えそうな文だけがあるような
スクリプトでは ensure 節の ISeq が空っぽになるため catch table の範囲に ensure
節の先頭が含まれてしまって、VM が同じ位置で無限ループ状態になってしまうというす
ごい不具合があり、対策として iseq_setup_insn() で ensure 節が(最適化の結果で)空
っぽになった時に nop 命令を入れておくようにしています。 ensure が元から空っぽの
時は compile 時に明示的に nop を入れてたみたいですが、最適化で消えた後は救えて
なかったということですね。 [ruby-core:90332] [Bug #15385]
