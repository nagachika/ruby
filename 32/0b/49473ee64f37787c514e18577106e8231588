詳細はわかりませんがコンパイル時の警告で stderr へ書き込むと require の同一ファ
イル並列読み込みを防ぐためのロック(違うかも)に問題があるらしく、rb_stderr(定数
STDERR)がプロセス起動時のものから変更されていなければ fwrite(3) で直接書き込む
ようにする rb_write_error_str() を作ってそちらを使うようにしています。本当は
$stderr に設定した IO に書き出したいみたいですが、当座の修正とのこと。
