String#encode での文字エンコーディング変換で変換できない文字の置換先を特に指定
するために :fallback オプションに Hash を渡して変換テーブルを渡せるのですが、そ
の Hash のデフォルト値つき(Hash.new にブロックを渡して生成したもの)のデフォルト
値が利用されていなかったのを使用するようにしています。また :fallback に Proc オ
ブジェクトなど '[]' メソッドで変換後の文字を返させるオブジェクトを許容するよう
にしています。[ruby-dev:42692]
