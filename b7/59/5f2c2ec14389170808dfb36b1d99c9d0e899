r63571 の再修正で Solaris の……に限らないのかな? C++ のコンパイラ以外ではそも
そも __cplusplus マクロがないかもしれないので defined() でのチェックも追加して
います。 [ruby-core:87364] [Bug #14816]
