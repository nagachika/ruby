diff は結構多いですが、これまで #define していた定数を enum にしたり構造体の宣
言場所(ファイル)を変更したりといったリファクタリングが主で動作に影響するような
内容はなさそうです。
しかしちょっと気になる点もありました。compile.c で setup_args の最後の引数の型
を unsigned long * から VALUE * に変更していますが、これはビットフラグ用の整数
値として利用していて、さらに呼び元ではその結果を LONG2FIX マクロに渡しているの
で、long で良かったんではないでしょうか。まあこのフラグは最下位1バイトまでしか
使っていないみたいなので、おそらく実害はないでしょうけど今は sizeof(long) !=
sizeof(VALUE) な環境がありえるらしいので一応。
それから、コメントアウトされていますが ISeq の iseq_marshal_dump/load という関
数名がある(実体はありません)ので、ISeq の Marshal.dump/load の対応がそのうち入
るのかなーとちょっと期待です。互換性や validation が課題なのでしょうけど。
