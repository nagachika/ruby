BSD 系の環境で利用可能な malloc_size(3) というライブラリ関数を利用して malloc()
等で確保したメモリ領域のサイズを取得するようにしています。 r43760 あたりで導入
した malloc_usable_size(3) と同様に利用しています。へーこういう関数結構いろんな
環境であるんですね。なお Mac OS X も BSD 系列なので malloc_size() が存在するよ
うです。
[追記]ChangeLog には BSD にあるって書かれているのですが、今のところ実際に存在が
確認されているのは Mac OS X だけらしいので、どちらかというと Mac OS X 向けの追
加だそうです。[/追記]
