IO#fcntl に F_DUPFD_CLOEXEC の値を直接渡して呼び出した時に cloexec フラグを立て
た fd の最大値を更新するようにしています。 ruby では IO は明示的に立てないよう
に指定されないと cloexec フラグを立てるようにするので、これによって問題を引き起
こすようなコードはなかなか書かないと思いますが、直接 fcntl(3) を使ってフラグを
立てた場合が抜け穴になっていたようです。
