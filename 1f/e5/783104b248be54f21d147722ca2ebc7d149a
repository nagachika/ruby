GC::Profiler.report で GC のプロファイル情報を出力させると内部で全出力を1つの大
きな文字列を連結して作ってから出力しようとする実装なのでさらにメモリを利用して
しまって再度 GC が走るという非効率な状態になっていたので、GC::Profiler.result
をベースにし実装ではなくて、コールバック関数を渡して少しずつ文字列をコールバッ
クに渡す実装を元にして report では順次出力するようにしています。(result は文字
列で返すのでコールバックで文字列連結する)。 [ruby-core:47163] [Bug #6865]
