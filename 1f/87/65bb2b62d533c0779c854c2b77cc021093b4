Array#flatten で返すオブジェクトのクラスを rb_class_of() で取得した receiver と
同じクラスを使おうとしていましたが、rb_class_of() は特異クラスがあったらそれを
返すので、別のオブジェクトで同じ特異クラスを持つことになってしまうので、
rb_obj_class() で特異クラスはスキップしたクラスを取得して使うように修正していま
す。 [ruby-dev:49781] [Bug #12738]
