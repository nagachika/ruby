メインスレッドのオブジェクトに特異クラスを追加すると、終了時に二重に解放処理が
走って double free の警告が出力される不具合の修正。終了時の VM 解放処理での GC
で Thread と Mutex の解放を抑制しているところでオブジェクトのクラスとの直接比較
でチェックしていたので、継承関係も含めてチェックするようにしています。
[ruby-core:36741] [Bug #4828]
