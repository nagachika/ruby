Hash#transform_keys! でブロックで break したり大域脱出したりして途中で止めると、receiver の Hash でブロックが呼ばれなかった key が消えてたのを修正しています。最近の変更の影響かと思ったけど rubyspec には元の挙動を確認するテストがあって、昔からみたいですね。まあ、あきらかに不具合だと思いますが。 [ruby-core:102949] [Bug #17735]
