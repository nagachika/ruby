ObjectSpace._id2ref の実装で id から検索したオブジェクトが GC 済みのオブジェクトだった場合にそれを返さないようにしています。 GC.compact の対応で実装を変更した時に不正なオブジェクトも返すようになってしまっていたのかな。
