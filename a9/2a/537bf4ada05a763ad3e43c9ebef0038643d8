さらに文字列の NUL 終端文字の対応。 str_new0_cstr() という termlen の指定つきで
文字列オブジェクトを生成する関数を追加して各所で str_new() や rb_str_new_cstr()
のかわりにこれをこれを使うようにしています。 r55547 では TERM_LEN_MAX というマ
クロでデフォルトで終端文字のサイズを 4 としる文字列オブジェクトを生成する保守的
な方法を取っていたので、1バイトで足りるとわかっている時やエンコーディングから終
端文字のサイズがわかる時は明示的に指定して作るようにしています。
[ruby-dev:49699] [Bug #12536]
