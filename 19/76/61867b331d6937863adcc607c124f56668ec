while ループの中で return すると Stack Consistency Error が発生するという不具合
を修正。こんなのがあったとは。 peephole optimization で jump 先が leave 命令だ
けだった時に jump を消して leave にするという最適化でVMスタックの深さの調節がう
まくいっていなかったとのこと。けどこの最適化部分は最近の変更はされてなかったみ
たいだけどチケットによると 2.5.0 からみたいで、他の部分の変更が影響しているのか
なぁ。手元では2.5.0でも再現しないんだけど……。 [ruby-core:84589] [Bug #14273]
