Proc の呼び出し時に配列を渡したら自動的に複数のブロックパラメーターに splat する挙動(これがまたややこしいんですよね…)は yield に複数の引数が実際に渡されてたら抑制されて1つめのブロックパラメーターに配列が渡されるようになりますが、keyword splat でキーワード引数を渡した時に抑制されてしまっていたのでこの時は抑制しないようにしています。 [ruby-core:96990] [Bug #16560]
つまり `m{|a, b| p [a, b] }` みたいな2つのブロックパラメーターを受け取るように宣言されたブロックに対して m の中から `yield([42, 72])` だと `[42, 72]` になる(yield している引数は1つにもかかわらず、配列を splat して複数のパラメーターとして分解して渡す)けど `yield([42, 72], nil)` だと `[[42, 72], nil]` と1つめの引数を splat するのが抑制される。ところが `yield([42, 72], **{})` でも `[42, 72], nil` となってしまっていたけど、この場合は `[42, 72]` のほうがいいよね、ということですね。
