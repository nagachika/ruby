IO#read などにあらかじめ読み込み先のバッファとして使う文字列を引数で渡すと、
"can't set length of shared string" という例外になってしまうことがある不具合を
修正しています。事前にサイズを指定済みで変更の必要がない場合には rb_str_set_len
() を呼ばないようにして回避しています。けどこれ実際に呼んだサイズが小さかったら
やっぱり呼ばれてしまうんですよね。その場合は大丈夫なんでしょうか。
[ruby-core:46586] [Bug #6764]
