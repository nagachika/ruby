チケットの報告内容非常が不思議な感じですが Pathname に与える文字列オブジェクトの状態によって(共有文字列かどうかとか?) expand_path の結果を Kernel#eval にファイル名として渡して、その中で __FILE__ としてアクセスされるとバックトレースのファイル名表示が壊れるという不具合を修正しています。修正箇所は parse.y で ruby_sourcefile_string を保存する時に rb_str_new_frozen() のかわりに rb_fstring() を使うようにしています。つまり参照が漏れてて GC されてしまったということかな。 [ruby-core:94122] [Bug #16041]
