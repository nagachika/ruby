r61936 の ibf_dump_object_list() でメモリ確保に ALLOCV_N() を使うようにした変更
を revert しています。ここのルーブを回している dump->obj_list の Array オブジェ
クトはループ内で要素が追加されて最終的な要素数が伸びるかもしれないので、
ALLOCV_N() で固定サイズのバッファを作るのではオーバーフローする可能性があったの
で、rb_ary_tmp_new() で一時利用の Array オブジェクトを作って普通の rb_ary_push
() で(可能ならバッファの伸張が行なわれる)追加していくように修正しています。なる
ほどー、これは気がつかなかった。
