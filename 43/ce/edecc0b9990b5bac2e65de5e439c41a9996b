builtin 関数の呼び出しを行う vm_invoke_builtin() で引数の位置を VM スタックから得る処理を呼び元の invokebuiltin 命令の実装部分に移動して STACK_ADDR_FROM_TOP() というマクロを利用するようにしています。やってる内容はだいたい同じっぽいですが MJIT 時にも正しく動くようにするためにこのマクロを使う必要があるようです。
