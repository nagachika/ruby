シグナルハンドラ用のスタックを altsigstack() で登録するための代替スタック領域の
確保は malloc/free で実行するようにしています。また objspace がセットアップされ
ていない状態で呼ばれる可能性があるため xmalloc は利用してはいけなかったらしいで
す。そしてメインスレッドの代替スタック領域は init_heap で再度確保しなおしていま
す。これはなぜなんでしょうか。この修正は [ruby-dev:44315] [Bug #5139] の SEGV
時のバックトレースなどの情報の表示中に再度 SEGV してしまう問題のための修正です
。今手元で確認できませんが chkbuild をみると test_segv_test の結果は SEGV 時の
表示内容が増えているものの、まだ途中で落ちるのは直っていないようです。
