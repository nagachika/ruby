RubyVM::InstructionSequence (いわゆる ISeq) が保持しているオブジェクトへの参照
を GC の mark の対象にするために Array オブジェクトを作って、そこに mark が必要
なオブジェクトは入れるようにしていましたが、これをやめて直接 mark するようにし
ています。このために、命令毎に mark が必要なオブジェクトを operand に持っている
かどうかを示すフラグを追加して、mark 時には必要な命令だけ解釈して(decompilation
と表現されてるので、デコンパイルして?) mark すべきオブジェクト参照を取り出すよ
うにしています。これでメモリ使用量が抑えられるようになるみたいです。
[ruby-core:84909] [Feature #14370]
