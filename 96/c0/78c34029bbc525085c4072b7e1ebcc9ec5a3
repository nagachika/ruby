Thread オブジェクトの特異クラスのインスタンス変数へ代入すると二重 free のメモリ
エラーが発生する不具合を修正しています。RUBY_FREE_UNLESS_NULL というマクロで
free したポインタを NULL クリアするようにしています。また ruby の終了処理時に内
部的に利用している Array オブジェクトを rb_ary_free() で強制的にメモリ解放させ
ています。[Bug #4389] [ruby-core:35192]
