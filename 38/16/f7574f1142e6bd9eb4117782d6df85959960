r49452 で導入されて r50316 で修正されたマシンスタックの領域を alloca(3) で明示
的に確保しておく reserve_stack() という関数で、スタックが下方に延びる環境で代入
する位置を alloca(3) で確保した領域の下端に修正しています。 r49452 ではスタック
の領域いっぱいまで alloca(3) で確保して、その底というかてっぺんというか、オーバ
フローしないぎりぎりに書き込むようにしていたのですが、r50316 で 4KB 小さく
alloca(3) でメモリ確保するようにしていて、けど書き込み位置はそのままだったので
、書き込み位置も alloca(3) で確保した領域の下端に修正しています。 RubyCI の
CentOS 5 の x86_64 で miniruby が SEGV しまくってた現象の修正だそうです。これス
タックが上に延びる環境でも同じですよね。 [Bug #11457]
