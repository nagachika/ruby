Fiber pool のスタック領域をまとめて確保する fiber_pool_expand() でヘッダ部分である struct fiber_pool_allocation のメモリ確保の前にスタックとして使うメモリ領域の確保をする、ようにしているんだけど、これだと構造体のほうの RB_ALLOC() で例外発生した場合にリークするんじゃないかな? また 001f187ed6539f320421d8893d2f3c8f584cc3a5 でさらっと 4096 に増やしてた、まとめて確保するスタック数の上限をまた 1024 に戻しています。
