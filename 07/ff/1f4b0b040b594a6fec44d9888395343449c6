2148ee78a5bc5e679903f5839c66578bfcf94a39 の AtomicWrtite の切り出しは間違ってコミットしたものだったそうなので revert しています。
