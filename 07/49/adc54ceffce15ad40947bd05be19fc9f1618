標準添付ライブラリ logger.rb で複数プロセスで同一のログファイルに出力している時
にログローテートに失敗するのを修正しています。ファイルの存在チェックをしてから
open していたのが別のプロセスによって移動された瞬間だとチェック時は存在したけど
open 時には存在しなくなっている可能性があるので、open してみて Errno::ENOENT を
捕捉してファイルが存在しない時の処理に入るようにしています。また File#flock を
使ってログローテートを排他処理するようにしています。 https://github.com/ruby/
ruby/pull/428 [ruby-dev:47769] [Bug #9046]
