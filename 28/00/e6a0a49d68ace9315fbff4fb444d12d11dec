Regexp.match で第2引数でマッチ位置を指定された時に文字のバイト数の考慮をするよ
うにしています。
