r46285 の Marshal のテストで Thread の終了を待つようにしたのですが、それが
IO.pipe のブロックの外だったため、書き込みが完全に終了しない(正確には、書き込む
べき文字列は書き終えているのだけどまだ blocking region から抜けていない)ときに
close してしまうと IOError が発生する可能性があったので、先にスレッドの終了を待
ってから close するように修正しています。
