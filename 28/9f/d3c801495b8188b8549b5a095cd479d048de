irb が << メソッドの右辺(引数)とのあいだの空白を省くと誤ってヒアドキュメントと解釈してしまうことがあったので、字句解析時に Binding のローカル変数名リストを渡して << の引数にローカル変数が書かれてた時にヒアドキュメントにならないようにする修正です。わざわざダミーの代入文を頭にくっつけて Ripper::Lexer に渡すということをしてて、文脈で tokenize が変わる ruby の文法をエミュレートするのは大変ですね。 [ruby-core:102036] [Bug #17530]
