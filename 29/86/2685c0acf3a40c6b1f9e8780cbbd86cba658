Array#dig および Hash#dig という新しいメソッドが追加されています。ネストした
Array や Hash の深い場所の要素に、nil チェックしながら a[k1] && a[k1][k2] && k
[k1][k2][k3] みたいに参照したいことはとてもよくありますが、これが a.dig(k1, k2,
k3) でできるようになるというメソッドです。 rb_obj_dig() という関数も定義されて
いますが、Object#dig が定義されているわけではなくて Array#dig と Hash#dig から
再帰的に呼び出すためのものです。ここをみると独自に dig メソッドを定義しておけば
Array や Hash の dig の挙動を模倣させることもできるようです。これはよくあるちょ
っと面倒ケースが簡単に書けてしかもメソッド呼び出しを減らせる(Array と Hash だけ
の場合は)ので効率的にもなっていいですね。 [ruby-core:71293] [Feature #11643]
しかしリリース前に新機能とか文法変更とかラッシュで入りますね…。
