math.c で数値オブジェクトを double へ変換する Get_Double() というマクロを導入し
て、Fixnum の時は rb_to_float() を呼ばずに直接 double へキャストするようにして
います。高速化のためみたいですね。 to_f を呼ばなくなるので再定義が効かなくなる
という非互換はありますが…。実用的にはまあ許容できるような気もします。
[ruby-core:67822] [Feature #10785]
