io_fwrite(), rb_io_syswrite() などで rb_ensure() を使って例外発生時にも一時オブ
ジェクトの強制回収(rb_str_tmp_frozen_release() の呼び出し)をするようにしていま
したが、IO 操作時の例外発生はそれこそ例外的で頻繁に通るパスではなく、また例外オ
ブジェクトが既に作られているので一時オブジェクトも GC による回収にまかせてもい
いだろう、ということで直接呼ぶようにしています。これにより通常のケースを高速化
するのが目的のようですね。
