parse.y でメソッド定義の def 文のルール部で引数の前でトークンの値に cond_stack
と cmdarg_stack をセットしておいて、ソース部で COND_SET(), CMDARG_SET() で戻す
ようにしています。ルーブの条件部に def 文を書いたりした時のためみたいです。とい
うかこんなこと書けるんだな…。
