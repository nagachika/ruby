いわゆる多重代入のような構文(右辺左辺に複数の項目を書くと、右辺は配列として解釈され左辺が複数あると右辺を to_splat で配列として解釈してその要素を順に代入する、という機能の組合せによるもの)では通常は左辺から評価されるのですが、左辺にあるのが obj.attr= みたいな代入記号つきのメソッドであったり obj[]= のような添字つきの代入のメソッドだった場合に、その代入メソッド自体は後で評価されるのが適当ですが receiver である obj の部分も右辺の評価後に評価される、という挙動をしているのが不具合ではないか、という 10年前のチケットに対応した修正です。チケットおよび NEWS の追記をみると新しい挙動についてはわかると思います。代入のための VM 命令列を作るところに大きく手を入れて生成される命令の並びを大きく変更しています。 [ruby-dev:43272] [Bug #4443]
