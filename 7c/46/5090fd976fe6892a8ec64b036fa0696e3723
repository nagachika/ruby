Mac OS X で NGROUPS というグループ(Unix のユーザ管理上の gid とかのあの group)
の数を定義する定数が 16 なのに実際にはそれ以上のグループに所属することができる
ため、File.writable? などのファイルの権限を確認するメソッド群で誤った判定をして
しまうという不具合がありました。このコミットはその一連の対策の最初の変更で、ま
ず NGROUPS に依存するのをやめて独自に RUBY_GROUP_MAX という定数(65536。 Linux
がこの数で、これが多分最大じゃないかとのこと)を定義して使うようにしています。ま
たついでに xmalloc() でメモリを確保していたところを ALLOCV_N() を使って内部的な
String オブジェクトを使って確保するようにしています。 [ruby-core:52537] [Bug #
7886]
test/ruby/test_process.rb に関係なさそうな sleep 0.1 の挿入がありますね。
