rb_str_substr() から str_substr() という関数を切り出し、というかほぼ完全にコピ
ーして、引数 empty を追加してこれが偽の時には結果が空の文字列になる時には文字列
オブジェクトを作らずに Qnil を返すようにして内部的にはこちらを利用してい不要な
オブジェクト生成を抑制するようにしています。
