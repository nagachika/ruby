オブジェクトの確保時にインスタンス変数のインデックステーブルのサイズが埋め込みでは足りない時にオブジェクト生成時に同時に生成するようにしています。後で initialize の実行時にあふれて確保しなおすのよりこのほうが効率的だから、ということみたいです。ベンチマークも追加されてるけど、そんなに変わるのかな。と思ったけど速度よりはメモリ使用量を気にした最適化みたいでした。 https://github.com/ruby/ruby/pull/4216
