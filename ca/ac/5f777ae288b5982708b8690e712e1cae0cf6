標準添付ライブラリ monitor で f91879a7b548284c93743168acfd11e3d2aeefac で不具合修正のために Thread.handle_interrupt  での割り込みからの保護を追加したところ遅くなってしまったということで、この対策として C 拡張ライブラリで Monitor を実装して monitor.rb はこの wrapper のようにしています。なるほどなぁ、拡張ライブラリは極力書かず ruby で書いて高速に動かすような方向性(MJIT など)だったけど ruby レベルで書くと割り込みの制御などは難しいので Monitor みたいなのはさすがに C 実装のほうがいいのか。 https://github.com/ruby/ruby/pull/2576 [ruby-core:95349] [Feature #16255]
