同じく Array を期待しているところで Array 以外のものが来た時に例外を発生させる
ようにガードを入れています。
こういうところは to_ary を呼ぶなどするほうがいいんじゃないでしょうかね。
rb_convert_to_ary() だったかな？
