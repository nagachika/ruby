require したスクリプト内で例外が発生した時には $LOADED_FEATURES にはそのファイルを追加しないようにして、require が例外で抜けた時に再度 require した時に読み直せるようにしています。 2.7 からそうなってたらしい。 [ruby-core:97057] [Bug #16607]
