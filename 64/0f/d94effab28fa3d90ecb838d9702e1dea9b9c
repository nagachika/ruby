rubyspec の pattern match のテストで in のパターンに同じ変数名を重複して使った時にその値を使うのは結果が未定義なので避けるようにしています。rubyspec ってそういう「未定義」というのを許容せずに今の実装の挙動をそのまま反映するテスト書くことが多いので、たぶんわざとやってたんでしょうね。
