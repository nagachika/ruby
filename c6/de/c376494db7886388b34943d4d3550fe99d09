1.9 から導入された lambda の新しい ->(){ ... } という記法では仮引数に ->(a=0) {
... } のように省略可能引数を指定できるのですが、その時に Proc#arity が返す値が
省略可能引数より前の引数の数になってしまうので、 rest 引数と同様に負の値を返す
ようにしています。 Proc#arity の時に元々省略可能引数はなかったのでその考慮が漏
れていたようですね。確かにこの修正で -(省略できない引数の数+1) が返ってくるよう
になりました。 [ruby-core:41431] [Bug #5694]
