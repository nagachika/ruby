r42773 で導入された "foo"f という構文での freeze した文字列オブジェクトを返すリ
テラルで、同じ内容の文字列だとオブジェクトの実体もインタプリタで1つだけ持ってお
いて同じものを参照するようにしています。 freeze したオブジェクトってそういえば
解凍できないんでしたっけ?
ただこの実装だと比較に rb_str_cmp() を使っているため ASCII 互換なエンコーディン
グ同士で同一の文字列と判定されてしまうため、スクリプトエンコーディングが異なる
スクリプト内で同じ文字列の "foo"f のようなリテラルが書かれていると、後から呼ば
れたほうが本来と異なるエンコーディングを持つ文字列オブジェクトを返してしまって
います。 [ruby-core:57037] [Bug #8866]
