str_fill_term() で文字列の追加などで(エンコーディングが変化して?)終端文字のバイ
ト数が変化したらそれにあわせて必要ならバッファの再確保をするようにしています。
[ruby-dev:49699] [Bug #12536]
