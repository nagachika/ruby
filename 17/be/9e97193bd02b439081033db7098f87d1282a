gc.c に gc_mark_maybe() という is_pointer_to_heap() でオブジェクト用のヒープス
ロットに含まれているポインタかどうかと、T_ZOMBIE 型のオブジェクトではないことを
チェックした上で mark する関数を新設して使うようにしています。使っている箇所で
はもともと is_pointer_to_heap() によるチェックはしていましたが、T_ZOMBIE のチェ
ックは追加されたチェックのようです。 T_ZOMBIE は sweep 時に T_FILE や T_DATA の
free 関数に固有の関数が指定されていた時に実際の解放を次の finalizer 実行後まで
遅延する特別扱いをするので、その間のオブジェクトの型として使われるものです。確
か finalizer でこれら型のオブジェクトが持つポインタにアクセスする処理を書いてし
まっても SEGV しないようにする救済措置として導入されたものだったかと思います。
