r47305 で追加したテストで open がブロックなしで呼ばれていたため file descriptor
が leak していたのでブロックを渡して閉じるように修正しています。
