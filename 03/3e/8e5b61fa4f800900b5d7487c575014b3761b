test/ruby/test_process.rb に Kernel#exec のオプションに 3 => io のように fd=3
のリダイレクト先を指定するオプションの使いかたのテストを追加しています。 fd=3
は CRuby の場合 timer thread の通知用の pipe に利用されているのですが、systemd
が子プロセスに fd を渡す時にも利用されるものなので、起動プロセスに systemd を利
用したシステムでは fd=3 のリダイレクトは失敗するかもしれない、ということかな。
ちょっと意図はよくわかりませんでした。でも RubyCI をみるとこのテスト Solaris で
失敗しているみたいですね。
