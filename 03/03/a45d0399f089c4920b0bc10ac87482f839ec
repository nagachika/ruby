r52087 で frozen_string_literal: true のコンパイルオプションが有効な時(magic
comment がついている時)も "#{x}" のように式展開を含み、なおかつその中身が文字列
リテラルだけでないような時は freeze しない文字列を返すようにしていましたが、や
っぱり式展開が含まれる場合も freeze するようにしています。例外にするには理由が
弱いということでやっぱり一貫して freeze するようにしています。
[ruby-core:57574] [Feature #8976]
ちょっと話がそれますが %w{ a b } # => ["a", "b"] や %W{ #{a}, #{b} } のような
%w, %W 記法の時も frozen_string_literal: true で配列の各要素の文字列は freeze
されるのかな…と確かめてみると freeze されているようでした。
