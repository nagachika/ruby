df348310dc2ba0b01f7dd7277184c688a5d430fe のやりなおし。渡された引数の url を書き換えないといけないので代入でなく replace を使うようにしています。to_str を噛ませてるのはなぜだろう。呼び元はたいてい url は String のようだけど。
