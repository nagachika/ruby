configure での CXX の指定の検出について、ruby 本体のビルド時に C++ 用のコンパイラがないと CXX が設定されなくなっているため、C++ を使う拡張ライブラリのビルドもできなくなる(C++ コンパイラがある環境でも?)という問題があるらしく、autoconf はもともとそういう時に CXX=g++ をセットするみたいなのですが 50b18e81295ad2d45975e4d8ea1e0c7e85140b97 でその挙動をやめさせてたのがそういう場合の問題になるそうなので元の挙動に戻しているようです。そのかわり C++ 用ヘッダのテストをやめさせるために専用の変数を使うようにしています。 [ruby-core:100971] [Bug #17337]
