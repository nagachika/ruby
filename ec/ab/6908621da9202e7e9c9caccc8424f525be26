拡張ライブラリ io/console で rb_cloexec_open() が定義されていますが、これは本体
の io.c で定義されているからということで削除しています。しかし、io/console は
gem パッケージとして独立して配布もしている拡張ライブラリなので、古い Ruby 本体
との組み合わせも考慮しないといけないためにこの定義が #ifndef
HAVE_RB_CLOEXEC_OPEN での条件つきで定義されているものだと思いますので、消すのは
まずいと思います。
