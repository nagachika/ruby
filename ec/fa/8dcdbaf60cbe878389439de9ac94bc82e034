Proc.new や Kernel#proc で作った(is_lambda が false の) Proc オブジェクトのブロック内で return をすると、ブロック(Proc)からではなくその作成元のメソッドからの return の意味になりますが、既にそのメソッドから抜けた後で呼ばれた時にエラーになります。ところが lambda で作った Proc オブジェクトのブロック内で Proc.new で作ったブロックの中での return は外側の lambda のブロックを抜ける意味になるのでメソッドと同様に lambda から内側の Proc オブジェクトが返された後にそれを呼ぶとエラーになるような気がするのに、同じメソッド内だとメソッドからの return として処理されていたという仕様を変更しています。ややこしい。 [ruby-core:99499] [Bug #17105]
