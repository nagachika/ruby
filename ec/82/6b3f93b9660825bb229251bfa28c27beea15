thread.c の unblock_function_set() という関数で rb_thread_t::unblock を設定する
前に割り込みチェックするところのループ条件に raised_flag をみるようにしています
。チケットや追加されたテストをみるに、backtrace メソッドに block しうる処理が書
いてあるような例外クラスを定義した時にその例外発生時に hang する可能性があった
みたいです。 r16651 からというからずっと昔からあったものみたいですね。
[ruby-core:85939] [Bug #14577]
