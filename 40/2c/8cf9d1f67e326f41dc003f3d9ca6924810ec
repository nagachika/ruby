Windows 版の実装に Socket を特別扱いするためにハッシュテーブルに作った SOCKET
ハンドルを登録するようになっているのですが、このハッシュテーブル(st_table)を起
動時に生成するために VM 毎の ObjectSpace を持つ管理方法ができないため
ENABLE_VM_OBJSPACE というマクロが 0 にセットされているというコメントがあったの
で、このテーブルを実際に利用するまで初期化を遅延するようにリファクタリングして
います。
しかしこれだけでは Windows で ENABLE_VM_OBJSPACE を 1 にするとだめだったそうで
す。 [ruby-dev:44648] [Bug #5467]
