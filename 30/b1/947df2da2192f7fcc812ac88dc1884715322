正規表現の o オプション /#{expr}/o は正規表現リテラル内の式展開を最初の1回だけ
実行して、次からはその結果を使いまわすという挙動を指定するオプションなのですが
、展開する式の実行中に例外などの大域脱出が発生すると評価中の状態のままになって
再度評価しようとするとデッドロックするという不具合があり、VM の命令に once を導
入して修正しています。かわりに onceinlinecache 命令を削除しています。またこの影
響から InstructionSequence の minor version が上がって 2.0 から 2.1 になってい
ます。普通に使うぶんには全く影響ないでしょうけど。 [ruby-dev:45923] [Bug #6701]
