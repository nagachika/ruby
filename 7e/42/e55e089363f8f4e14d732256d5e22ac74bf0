parse.y に lexer の状態をチェックする IS_lex_state() というマクロがあるのですが
、これはチェックする対象の変数が lex_state 固定なので、変数を指定してチェックで
きる IS_lex_state_for() というマクロを新設して、各所でこれを使うようにしていま
す。 lexer の状態は一部ビットフラグになったので、まだ "==" で比較していたところ
もこれでビット単位のチェックになっています。
