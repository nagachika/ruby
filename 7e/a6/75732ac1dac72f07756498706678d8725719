ネストした名前の定数に "||=" を使って代入しようとすると SyntaxError になってい
たのを、代入可能にしています。なお "||=" と "&&=" のような論理演算子つき代入は
lvar ||= val を lvar || (lvar = val) の構文糖のように動作するので*1、未定義の定
数の参照は NameError になるので例外になるんじゃないかという意見もあったようです
が、未定義の定数の時も代入される(ネストしていない名前の定数はもともと代入できて
いた)ようです。つまり ||= の場合は (defined?(lvar) and lvar) || lvar = val のよ
うに動作するんですね。 &&= は NameError になりましたけど。 [ruby-core:40154]
[Bug #5449]
