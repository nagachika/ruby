Ruby の VM に ruby_vm_at_exit という API を追加しています。
これは拡張ライブラリから呼び出して、VM が終了する時にリソースを解放する処理を登
録するためのものです。将来的にマルチVMがサポートされるようになれば、VM の終了が
必ずしもプロセスの終了を意味しなくなりますから、拡張ライブラリで利用しているリ
ソースを解放しないといけなくなります。そのためのコールバック関数を登録するため
の API です。 ruby_vm_t * 型の引数を受け取る関数を渡すと RubyVM に登録されて、
VM の終了時に呼び出されます。
shyouhei さんのコミットログはいつも詳細で、意図を書いていてくれるので観察者とし
ては助かります。
