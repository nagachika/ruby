整数のビット演算で coerce を呼んで引数を適切に変換して処理するようにしてるよう
です。 rb_num_coerce_bit() という API が追加されています。 [ruby-core:39491]
[Bug #1792]
ちなみに修正前の bit_coerce() という関数(実際には coerce してなくて引数のチェッ
クしているだけ)は while 文の中で rb_raise() で例外発生だけしているという実質 if
文として使われていて不思議でした。
