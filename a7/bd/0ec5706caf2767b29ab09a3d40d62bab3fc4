compile.c の fix_sp_depth()、iseq_set_sequence() などでジャンプ先のラベルと sp が一致しない場合に警告メッセージを出力するようにしています。 Ruby の VM はコンパイル時にスタックの深さがわかっているという前提で作られているので、ジャンプ命令で sp が一致しないというのは本来まずいはずなので、そのような事態がおきてるのをデバッグするためかと思われます。
