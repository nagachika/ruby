標準添付ライブラリ rexml の REXML::IOSource.new で入力の BOM (先頭2バイトのエン
ディアン指定する文字列)を見て UTF-16BE もしくは UTF-16LE の文字列を生成するとこ
ろで手動でバイト列として書いていたところを String#encode を使って生成するように
しています。
