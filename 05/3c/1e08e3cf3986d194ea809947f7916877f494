拡張ライブラリ fiddle のテストで r55547 や r55552 の String の終端文字の複数バ
イト対応により embed できる文字数がエンコーディングによっては変わった結果失敗し
ている(この変更が問題だったというよりもそれによって潜在的な問題が顕在化した)も
のがあったので、Fiddle::Pointer にわたして変更する文字列は Marshal.dump/load を
使って完全に独立したバッファを持つものを渡すようにしています。文字列リテラルの
バッファを直接書き変えてしまっていたみたいです。 [ruby-dev:49700] [Bug #12537]
