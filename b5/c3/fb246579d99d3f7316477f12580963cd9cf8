Ruby のスクリプトファイルの magic comment に warn_indent というのが追加されてい
ます。
これは 1.9 で -w オプションをつけると begin-end とか if-end でインデントが揃っ
ていないと警告が出るようになったので、自動生成したソースなどでは抑制したいとい
うために導入されたみたいです。またこの magic comment はスクリプトファイル先頭に
限らず途中に書いてもよくて、どうやらファイル内の行ごとに on/off を切り替えられ
るようです。
# -*- warn-indent: true -*-
begin
 end  # <- 警告される
# -*- warn-indent: false -*-
begin
 end  # <- 警告されない
この差分を読んでて気がついたのですが、magic comment の処理はコールバック関数を
定義してテーブル(配列)に登録するだけで案外簡単に追加できるんですね。
