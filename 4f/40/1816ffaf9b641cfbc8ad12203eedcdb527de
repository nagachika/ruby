そしていよいよ本丸、RGENGC が入りました。 [ruby-core:54621] [Feature #8339]
世代別GC とはなんぞやとか、後述の write barrier とはどういうことかとかは昨日の
繰り返しになりますが「ガベージコレクションのアルゴリズムと実装」という本を読む
といいと思います。
差分は大きいので全て読んでいませんが、世代別GC を実装するためにオブジェクトの中
身を触る時に write barrier が必要になるため、アクセス用のマクロを用意してそれを
使うようにすることで write barrier の処理を挿入するポイントにしています。このた
め ruby 内部や拡張ライブラリを書く時の作法がかなり変わりそうです。
