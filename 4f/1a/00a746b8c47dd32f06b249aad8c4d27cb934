標準添付ライブラリ fileutils で操作するファイルが同一のパスを指してないかチェックする処理でファイルシステムが大文字小文字を区別するかで分岐してより厳密なチェックができるようにしています。 https://github.com/ruby/ruby/pull/1425
