拡張ライブラリ zlib の Zlib::GzipWriter で圧縮処理後のバッファ用の文字列オブジ
ェクトを write の時に頻繁に作りなおしてオブジェクトを使い捨てていたのを、struct
RBasic::klass を 0 にして内部的オブジェクトにして Ruby レベルから見えないように
して、内部で極力使いまわすようにしたり、読み切ったら rb_gc_force_recycle() で強
制的にバッファを解放させるようにしたりしてメモリ消費量を抑えるようにしています
。 [ruby-core:84638] [Feature #14315]
