拡張ライブラリ socket で Socket の close メソッドを呼ぶ前に closed? でチェック
していたのをやめています。 2.3 から close は既に閉じられた IO でも IOError を発
生させなくなったので不要になっていました。また if !... を unless に書き換えてい
ます。
