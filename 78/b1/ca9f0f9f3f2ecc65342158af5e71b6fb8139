rb_ary_initialize() に rb_ary_modify() を呼んでいるところが2回あるのですが、そ
の間に NUM2LONG() を使っていて、ここでコンテキストスイッチが起きて配列オブジェ
クトに変更が加えられている可能性があるため、その後で再度チェックしないといけな
い、ということをコメントに追記しています。 https://github.com/ruby/ruby/pull/
526
