拡張ライブラリ tk の extconf.rb で rb_thread_alive_p() と
rb_thread_check_trap_pending() の関数チェックを追加しています。またこのチェック
を使って存在しなかったら代替を定義して、#ifdef RUBY_VM で YARV の判定? をしてい
た条件コンパイル部分を一掃しています。これは古いバージョンの ruby に対する互換
性を保つための実装方法をリファクタリングしたということでしょうか。
