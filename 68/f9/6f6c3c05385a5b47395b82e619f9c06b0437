r40933 で追加した RGENGC 関連の Hash オブジェクトの write barrier 挿入の修正で
す。 Hash の要素を追加する時には value だけでなく key も write barrier の対象に
しています。また st_update() などで要素の追加/更新を行う時には、第2引数は実際の
格納先の左辺値ではなく、一時的に格納するローカル変数だったりするので、代入つき
の OBJ_WRITE() ではなく OBJ_WRITTEN() で更新されたことを知らせるだけにしていま
す。このあたりの RGENGC の実装についてはきっと明日の RubyKaigi 2013 でのささだ
さんの発表できけることでしょう。楽しみ!
