r47363 で system や spawn で fork(2) のかわりに vfork(2) を使うようにして高速化
していましたが、seteuid(2) や setguid(2) などで権限を変更して実行しているプロセ
スでは vfork() を使わないようにしています。 issetugid(2) というシステムコールが
あればこれを使って、なければ getresuid()/geteuid()/getuid() などを使って euid/
egid や ruid/rgid が変更されていないかをチェックするようにしています。 vfork()
で作られた子プロセスはメモリ空間を親プロセスと共有するので、その関係でやめてい
るのだと思いますが、一般的にどういう問題があるのかわちょっと調べきれませんでし
た。
