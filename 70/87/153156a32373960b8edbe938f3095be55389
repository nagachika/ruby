rb_threadptr_interrupt_common() という関数でスレッドへの割り込みを通知する内容
はこれまでメインスレッドへのシグナルのトラップハンドラ実行の通知と、全スレッド
が対象になる非同期の例外や(Thread#raise) や Thread#kill での停止の通知が一緒に
なっていたのを、ビットフラグを分けて別々に通知するようにして、関数も
rb_threadptr_trap_interrupt() と rb_threadptr_interrupt() に分けています。
もしかしたらメインスレッド以外でもトラップハンドラを実行するようにする前触れと
かでしょうか。と思ったら、r37861 でシグナルの割り込みをマスクしてトラップハンド
ラに再入しないようにしているのでそのためだったようです。
