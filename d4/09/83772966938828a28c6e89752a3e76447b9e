MJIT 最適化で JIT で生成する関数で reg_cfp->self の値をローカル変数に格納しておいてこれを参照するように局所的に GET_SELF マクロを書きかえておくようにしています。ふーむ、そうかコンパイラは reg_cfp が書きかわってるかもしれない場合に毎回参照を辿るコードを吐くからこのほうが速くなるのか。
