21ad4075a71f302474a78dc744149ac8ce2ff0ec および 21ad4075a71f302474a78dc744149ac8ce2ff0ec で rb_raw_obj_info() で T_STRING 型オブジェクトのダンプ用の文字列をバッファに追加する時の文字列サイズを明示するようにした時に RSTRING_LENINT() を使ってましたが、RSTRING_LENINT() はオーバーフロー時に例外を発生させることがあって、この関数は GC 途中に呼ばれる可能性があるのでここで例外を発生させるのはよくないので str_len_no_raise() という専用の関数を追加してこれを使うようにしています。
