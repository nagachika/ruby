変数のスコープに関する警告で、前のメソッド呼び出しのブロック内のダイナミック変
数と同名のメソッド呼び出しを関数的に(receiver を省略して)呼ぶと誤検出して警告が
出てしまうということで、WARN_PAST_SCOPE というマクロが真に定義された時だけ(未定
義の時は 0 に定義するようにされている)この警告を出力するようにしています。Ruby
では変数の参照とメソッドの呼び出しが区別がないので、変数がなければメソッドの呼
び出しになりますから、正当なメソッド呼び出しでも過去のブロックで衝突していると
誤検出してしまうんですね。まあ、いずれにせよメソッド名と同名のローカル変数/ダイ
ナミック変数はやめたほうがいいと思いますけどね。とはいえブロックの中だと場合に
よっては module_eval や instance_eval で別のコンテキストで実行される可能性もあ
るので難しいところですね。 [ruby-core:67162] [Bug #10661]
