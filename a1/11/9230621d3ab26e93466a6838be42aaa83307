r44060 の Hash#replace の最適化をやめた変更で {}.replace({}) が SEGV してしまう
ようになっていたので table2 が NULL の時をケアする条件分岐を追加しています。
