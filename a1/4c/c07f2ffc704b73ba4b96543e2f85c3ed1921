objspace_xrealloc() で再確保後のサイズが 0 の時に 0 (NULL) を返していましたが、実際に objspace_xmalloc0() にサイズ 0 で確保させてみてアドレスがかえってきたらそれを返すようにしています。それも NULL だったらとりあえずサイズを 1 にして確保することにして、なにかしら有効なアドレスを返すようにしています。
