StringIO#read の第2引数(読み込み先のバッファとして使う String オブジェクトを指
定する)に nil を渡された時に IO だと自動的に新しい文字列を確保する(つまり省略時
と同じ挙動をする)のに StringIO だと例外が発生してしまうので、挙動を揃えるように
しています。また第1引数(読み込むサイズ)が指定された場合は第2引数でバッファに使
う String が渡されても読み込み後にそのエンコーディングを ASCII-8BIT にするよう
にしています。 [追記]それから第1引数が nil で第2引数に String が渡された場合も
、StringIO#string (StringIO が中に持ってる文字列)のエンコーディングをコピーする
ようにしています。[/追記] [ruby-core:39026] [Bug #5207]
