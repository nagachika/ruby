無名モジュールの下に定義したクラスの Module#name が、無名クラスを定数に代入した
場合に通常はその時点でその定数名がクラスの名前になるのに、保存されていなかった
のを修正。class/module 文で作ったときは登録されていました。 [ruby-core:42865]
[Bug #6078]
n = Module.new
m = Module.new
n::M = m
n::M.name => nil
しかしこれだとテストに失敗していたようです。
