0aa267f985084e69c3e45cc3e94698eaacab5c36 で追加したテストで Kernel#open が再定義されていて別の実装が動いているケースというのを考慮するようにしています。警告メッセージの判定に使う Regexp の === メソッドを再定義することで内部から呼ばれたメソッドを判定するというすごいワザ。
