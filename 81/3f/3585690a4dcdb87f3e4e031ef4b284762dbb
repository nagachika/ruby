Array#join の結果の文字列のエンコーディングは連結される文字列同士のエンコーディ
ングと内容の関係で決まりますが、通常最初の文字列の要素のエンコーディングに依存
しますが、最初の要素が文字列じゃなくて、文字列オブジェクトの後に文字列じゃない
オブジェクトが続くという時に(テスト参照)、後のオブジェクトを文字列に変換したも
ののエンコーディングがコピーされてしまうという不具合の対処です。
[ruby-core:39776] [Bug #5379]
なのですがここで追加されているテストでは文字列のエンコーディングは UTF-8 なので
すが、含まれている文字が ASCII の範囲のものなので連結結果も US-ASCII になってし
まうようです。
