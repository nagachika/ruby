fstr を作成する rb_str_new_frozen() で分岐に使う条件で struct
RString::as.heap.aux.shared についてありえない条件が使われていたのを消している
ようです。あとは条件分岐の順番の入れ替えや共通の処理を分岐の後に括り出すなどの
リファクタリング。
