IO の入力でバッファに読み込みしてエンコーディングの変換をするところで無駄な処理
を省くように早めに break しているようです。がループ後に明示的な return をしてい
ないので戻り値が不正になってしまっています。
