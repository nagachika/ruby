finalizer を設定した時のその finalizer に設定した Proc オブジェクトが対象のオブジェクトへの参照を含んでしまっていると GC されなくなってしまうので、ObjectSpace.define_finalizer でそのような場合を検出して警告を出すようにしています。なのですが判定内容をみると登録している Method の receiver が対象のオブジェクト自身というケースだけ検出してる? ような感じです。
