さらに iseq_peephole_optimize() で branchif や branchunless の直前にリテラルな
どで真偽があらかじめわかっていてジャンブしない場合は分岐命令自体を消すようにし
ています。 defined? などでこの最適化が効く命令列が現れるらしいです。
