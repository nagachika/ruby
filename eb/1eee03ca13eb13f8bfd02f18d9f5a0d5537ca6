Syck による YAML load 時に Exception (例外オブジェクト)をロードする時に YAML
.object_maker というメソッドを使ってインスタンス変数に例外メッセージをセットす
るようにしていたのですが、例外クラスは内部的に "@" で始まらないインスタンス変数
にメッセージを格納していて、これは Ruby スクリプトからは不可視で操作できないの
で、Exception#initialize を UnboundMethod として取り出して、これを allocate で
確保したオブジェクトに UnboundMethod#bind で結び付けて呼ぶことでセットするよう
にしています。 initialize を独自に実装している例外クラスだとメッセージ以外の情
報が初期化されていない例外になっちゃうかもしれませんが、とりあえず例外メッセー
ジはセットされるようになります。
