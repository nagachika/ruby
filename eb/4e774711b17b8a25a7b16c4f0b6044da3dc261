標準添付ライブラリ reline で Meta キーつきの文字に対応するようにしています。M-x みたいな入力は内部的には連続した2つのキー入力とみえるようなので、タイムアウトをかけて一定の時間内に連続して受け取ったら Meta キーつき入力として扱うようにしているようです。
