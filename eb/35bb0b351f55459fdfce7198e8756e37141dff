rb_reserved_fd_p() という関数とそれを呼ぶ RB_RESERVED_FD_P(fd) というマクロの定
義を公開 API に追加しています。これはタイマースレッドへの通知用に利用する pipe
のようにインタプリタが内部で利用している fd を検出するための API です。また
IO.new で内部の fd を使って IO オブジェクトを作るのを禁止しています。
これは [ruby-core:37727] で Passenger が fork した時に全ての file descriptor を
問答無用で閉じているためにタイマースレッド用の pipe も閉じられてしまってエラー
になるという問題が報告されていて、その対策のために追加したものです。アプリケー
ション(Passenger)側でこの API を使って閉じるべきでない fd を認識するようにする
必要があります。
