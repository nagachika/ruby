r45648 と同じく string.c の coderange_scan() をリファクタリングしてループと条件
分岐の構造をシンプルにしています。
