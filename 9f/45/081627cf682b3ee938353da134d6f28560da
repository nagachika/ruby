メソッドに渡された C 実装のブロックを呼び出すコールバックの関数型
rb_block_call_func にブロック引数*1を渡せるように型を変更して、既存の xxxx_i()
みたいな関数の引数を軒並追加しています。これ呼び出すところは既に渡していたのを
受け取れるようにしているのでこれで壊れたりはしないでしょうけど、公開している型
なのでこれを利用している拡張ライブラリでコンパイラの警告とかが出てしまうんじゃ
ないでしょうか。この判定のために RUBY_BLOCK_CALL_FUNC_TAKES_BLOCKARG というマク
ロを 1 に定義しているみたいなので拡張ライブラリはこの定数をみて型を変更しろとい
うことなんでしょうけど……。
