メソッド呼び出しの rb_call_info_t の情報の破壊の可能性としてメソッド呼び出しの
イベントフック(set_trace_func) で同じメソッドが呼ばれるという可能性があったので
、EXEC_EVENT_HOOK を呼び出す前に rb_call_info_t の内容をローカル変数に保存して
おいて、それを使うようにしています。またそのために rb_method_cfunc_t::invoker
の引数の型を rb_call_info_t を直接受け取らないように変更しています。 r37641 の
ように save して restore する方法にしなかったのは速度的なことを気にしてでしょう
か。
