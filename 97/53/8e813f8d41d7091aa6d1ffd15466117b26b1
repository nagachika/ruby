Fiber のコンテキスト切り替え時に、シグナルによる割り込みを通知する
interrupt_flag が rb_execution_context_t に移動されているため切り替え時に喪失さ
れる可能性があったので、ec_switch() で ec を復帰した後に
RUBY_VM_SET_TRAP_INTERRUPT() を呼び直すようにしています。んーでもどうせ後で呼ば
れた時に割り込みフラグが立つのではないかと考えると、切り換える前の
interrupt_flag を復帰したやつにコピーしないといけないんじゃないかな、と思ってし
まったけどこの interrupt_flag は割り込みをチェックするかどうかのフラグだから余
分かもしれないけどフラグを立てておいてチェックされないまま割り込みが滞留するの
を防ぐってことですね、多分。 [ruby-core:88119] [Bug #14939]
