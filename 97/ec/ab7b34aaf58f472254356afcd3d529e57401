r37480, r37481 あたりの require の高速化と絡んだ話だと思うのですが
$LOADED_FEATURE や $LOAD_PATH に pop や shift を使った場合に r37478 で追加した
rb_ary_shared_with_p() が2つの配列がバッファを共有しているかを判定するのに失敗
していたので、配列サイズも比較するようにしています。バッファは共有しているけど
長さだけ異なるという共有のしかたがあるってことですね。 [ruby-core:49518] [Bug #
7383]
