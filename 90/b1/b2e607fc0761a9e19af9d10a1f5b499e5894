Solaris 版での ENV[]= などで環境変数名のチェック処理を追加しています。 Solaris
でも(Windows と同様)環境変数名に "=" が含まれていると EINVAL がかえってくるそう
です。また malloc(3) のエラーチェックが漏れていたところを修正しています。
