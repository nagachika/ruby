標準添付ライブラリ abbrev で [\w\W] という文字クラスを含む正規表現を使うと重複
があるという警告が出ていたので、正規表現を使わず末尾から1文字ずつ削ってチェック
していく書きかたに変更しています。正規表現のほうは \z でマッチしていたので文字
列の末尾ではなく行末で削ってしまっていたのではないかと思うのでそもそも不具合も
あったのかと思います。 [ruby-core:50344] [Bug #7471]
