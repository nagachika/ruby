open のモードに 'bom' の指定があって先頭 3バイトまで読み込んで判定しているとこ
ろで、ファイルが2バイト以下しかなくて EOF が返ってくると rb_io_getbyte() が
Qnil を返すのにそれを判定していなかったので例外が発生していた不具合を修正してい
ます。 [ruby-core:45203] [Bug #6487]
