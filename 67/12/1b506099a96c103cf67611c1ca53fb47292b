unknown_keyword_error() で受け付けないキーワード引数のエラーを処理すようとした
時に Hash の要素の削除に rb_hash_delete() を呼んでしまっていたので、メソッドに
渡されたブロックを yield してしまっていたので st_delete() を使って直接 st_table
から削除するようにしています。不可解な挙動だなーと思ったらこんな罠があったとは
。チケットのほうでは rb_hash_delete() をブロックを呼ばないように修正しようとい
う案も出ています。 [ruby-core:65837] [Bug #10413]
