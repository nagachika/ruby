r40117 で追加した curses のテストで子プロセス終了後の pty からの読み込みで
Linux で EIO が発生することがあったみたいで、子プロセスから '\0' を書き込んで、
gets で '\0' まで明示的に終端文字を指定して読み込むようにしています。
