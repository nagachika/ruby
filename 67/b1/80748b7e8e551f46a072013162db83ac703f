r40366 および r40392 で marshal_dump メソッドを定義した時の Marshal.dump の挙動
の変更の追加修正で、Marshal.load 時にインスタンス変数をコピーする際に
rb_generic_ivar_table() で取得したインスタンス変数用のテーブルのみしか見ていな
かったのを普通のインスタンス変数もコピーするようにしています。先日 marshal_load
に渡すオブジェクトのインスタンス変数もコピーされると書きましたが、実際にはコピ
ーされていなかったみたいです。また generic_ivar_table というのはあまり読んだ記
憶がないのですが、即値のオブジェクトのインスタンス変数を保持するために static
なテーブルにインスタンス変数用の st_table を登録しておくもののようです。
[ruby-core:51163] [Bug #7627]
