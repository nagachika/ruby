ID をキーとして管理するテーブルに st_table を利用していましたが、ID のみの場合
はメモリや処理時間の無駄があるので、ID をキーとする専用のテーブル st_id_table
というのを導入して、symbol や method entry などなどでこれを利用するようにしてい
ます。 st_id_table の実装は ID_TABLE_IMPL というマクロで切り換えることができる
ようにしていて、デフォルトは小さい時は配列で要素数が多くなってきたらオープンア
ドレス法のハッシュテーブルという実装みたいです。ずいぶんたくさん実装を用意して
ますね…。 [ruby-core:70257] [Feature #11420]
ruby-dev でデータ構造/アルゴリズムの募集をしていたので、腕に憶えのある方は挑戦
してみてはどうでしょう。どっちかというと実際の使われかたに近いようベンチマーク
を作るのが重要なのかもしれませんけど。 [ruby-dev:49209]
