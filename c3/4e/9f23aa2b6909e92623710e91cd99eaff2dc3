型の変換に to_str や to_ary, to_hash などの「暗黙的な変換」を行うメソッドがなく
て失敗した時と、to_s や to_a による変換が失敗した時とで TypeError 例外のメッセ
ージを分け、暗黙的変換の時は "no implicit conversion of X into Y" のようなメッ
セージにしています。変換メソッドを明示してはどうかという提案に対しては drbrain
さんが to_str や to_ary はそのオブジェクトが String, Array と同様に振る舞うとい
う前提がありあまりほいほい定義していいものではないけど、メッセージに出すとユー
ザがそれを定義して回避してしまうことになるんじゃないかと書いていてなるほどと思
いました。 [ruby-core:50733] [Bug #7539]
