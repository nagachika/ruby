IO からの読み込み待ちしているスレッドのいる時にシグナルで停止された時のテストを
修正しています。sleep でタイミングをはかっていたのを子プロセス側でメインスレッ
ドがIO待ちに入ってからパイプを通じてトークンを書き出させて、それを待つようにし
ています。また EnvUtil.invoke_ruby を利用して子プロセスの標準出力/標準エラー出
力を捕捉するようにしています。
