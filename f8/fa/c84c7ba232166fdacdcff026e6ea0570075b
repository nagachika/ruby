rubygems のテストで Thread を使ったテストのために、spec ファイルの末尾に Latch
なる同期用のクラス(なぜこれ独立して定義してるんだろう…と思ったけど古い ruby も
サポートするためかな)の操作を追記してたのを、Thread 起動用のユーティリティメソ
ッドを追加して、これを使うようにしています。このテストがたまにハングアップして
しまってたのを修正しているそうです。あとなんか定義していた定数を remove_const
する後処理が ensure 節にあるのに、例外発生時にその前に return してしまうように
なってたので、不要な return 文を削除しています。
