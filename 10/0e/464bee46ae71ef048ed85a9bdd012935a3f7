拡張ライブラリ objspace の ObjectSpace.trace_object_allocations_start でオブジェクト確保の情報収集中に T_NONE 型のオブジェクトを mark しようとして異常終了してしまうという不具合の修正。gc_event_hook() というマクロに任意の式を埋め込める gc_event_hook_prep() というマクロを追加して newobj_slowpath() で GC のイベントフック呼び出し前に確保したオブジェクトの struct RVALUE のメンバーを 0クリアしておくようにしています。イベントフック内で不正なメモリにうっかり触らないようにするため? [ruby-core:102334] [Bug #17599]
