ブロックつきの Hash.new {} でデフォルト値を指定するようにした場合に、Hash#
default で引数なしでデフォルト値を参照しようとした場合に、引数がなくても argv
を参照してしまっていたので引数の数が1の場合に限って参照するように修正しています
。
小さな例では発生しませんけどこれ場合によっては SEGV する可能性があるということ
ですかね。だとすると backport 対象になりますね。
