r57323 のテストの変更を revert しています。 StringIO.new の引数を省略すると、そ
のエンコーディングは IO.default_external を使うのでスクリプトのエンコーディング
(デフォルトは UTF-8)を使う "".dup を渡すのとは厳密には異なるのでした。
