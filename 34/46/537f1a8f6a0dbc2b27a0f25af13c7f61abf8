これも MSVC14 向けの修正です。 Windows で stdio の FILE 構造体の内容をのぞき見
て利用していたところが遮蔽されるようになったそうなので、vcruntime_file という型
を定義して共用体を利用して内容を取得するようにしています。なんか union の使いか
たが知らない方法のような。なんだろこれ。
また _filbuf() と _flsbuf() というマクロ? 関数? が MSVC14 でなくなったそうで替
わりに _fgetc_nolock() と _fputc_nolock() を利用するようにしています。
