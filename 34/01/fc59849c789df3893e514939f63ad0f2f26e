r36718 の DL のコールバックのブロック呼び出しの再修正です。 lambda でないブロッ
クを define_method でメソッドへ変換して呼ぶことで return 等を lambda のように扱
わせていたのですが、メソッドやインスタンス変数が self と共有されていないため失
敗することがあったので、動的に定義する無名クラスを self のクラスを継承させて、
またself と同じインスタンス変数を移植してから呼ぶようにしています。 [Bug #6389]
[ruby-dev:45604]
