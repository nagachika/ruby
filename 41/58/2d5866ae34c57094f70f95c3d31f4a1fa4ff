ある Module を include した後でその Module に別の Module を prepend した時に、その前に include しておいた Class/Module の ancestors に後から prepend した Module は反映されない、というのを修正しています。このチケット見覚えがありますね。長らく諦めてた(忘れられてた?)ようですが Module#prepend の実装に prepend 先が Module だったら対応する全 IClass にも prepend 処理を伝播させるようにして修正(?) しています。 Module#include のほうは 3556a834a2847e52162d1d3302d4c64390df1694 で修正してたのでその修正漏れという形のようですね。 [ruby-core:61117] [Bug #9573]
