r33297 で FileUtils.compare_stream を高速化した変更の再適用です。 r34669 で
FileUtils を大規模にリファクタリングした時に変更が巻き戻されてしまっていたので
、再度 r33297 と同じ変更を加えています。 [ruby-core:47545] [Feature #7028]
