objid_hash() で LLP64 環境向けにポインタのサイズが long と long long どちらと一致するかで数値の変換マクロ(NUM2LONG/NUM2LL)どちらを使うかをpreprocessorで分岐するようにしています。うーん、でもこれってこれだけではだめなんではなかったっけ。よく憶えていないけどこれでいいんだったらもう直されているような。
