rb_fstring() に共有文字列の root になっている String オブジェクトのバッファを解放してしまう可能性があるという不具合があったのを修正しています。 struct RString の flags に新たに bit を割り当てて root になってるオブジェクトをマークしておくようにしています。 [ruby-core:94831] [Bug #16151]
