標準添付ライブラリ reline の Reline::ANSI.prep でその時点での入力の IO から読めるぶんは読みためておくようにしています。 stty 実行するとバッファが消えるのでその前に書かれてたぶんを救おうとしているのだと思います。
