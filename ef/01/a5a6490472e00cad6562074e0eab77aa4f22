r42224 の Hash#assoc 最適化を revert しています。 table->type->compare は hash
が一致した時しか呼ばれないためこのトリックは使えなかった模様。また Hash#assoc
にキーとの比較が "==" で行なわれていることをチェックする({1 => :a}.assoc(1.0)
は [1, :a] を返す)テストを追加しています。
