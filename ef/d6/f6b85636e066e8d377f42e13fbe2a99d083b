Thread のテストで利用している test/ruby/lbtest.rb というスクリプト内でメッセー
ジを表示するのに puts を利用しているところをメッセージ内に改行を含めるようにし
て print で表示するように変更しています。おそらく puts だとメッセージ本体と改行
コードで2度出力処理するので、複数スレッドで同時に実行すると混ざることがあるので
まとめて出力するようにしているのだと思います。
