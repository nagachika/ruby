popen で開いた pipe を閉じる時に、カレントスレッドが kill されている場合は
waitpid に WNOHANG フラグを追加して子プロセスの終了を待たないようにしています。
[ruby-core:70671] [Bug #11510]
うーん、これはそういうものなんですかねぇ。なんとなくはやく止めたいなら止めたい
で signal などで子プロセスを終了させるなどするほうがいいような気もしますが
(signal は移植性に欠けるというのはありそうですが)。
