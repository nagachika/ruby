8b41e9b6e77b74ba7b90774dc1ff1959b95ca61a で復活させた gc_is_moveable_obj() で FL_FINALIZE フラグをチェックしてるところに理由をコメントで追記しています。finalizer_table はキーが VALUE を数値として扱う numtable を使っていて GC の mark 対象にならない(mark しちゃうと GC で回収されなくなって決して finalizer が呼ばれない)ので別途フラグをチェックして pin down する必要があったということです。なるほど。じゃあ 8b41e9b6e77b74ba7b90774dc1ff1959b95ca61a で finalizer_table の gc_update_table_refs() を復活させてるのはキーじゃなくて対応する finalizer のほうの移動のためかな。
