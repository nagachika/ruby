ObjectSpace::WeakMap に freeze したオブジェクトを格納しようとするとチェックで弾かれてエラーになるのを修正しています。 finalizer の設定の時のチェック関数を利用していたので frozen チェックも一緒にしてしまっていたようです。  [ruby-core:80835] [Bug #13498]
