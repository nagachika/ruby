r36270 で zlib の処理中に GVL を解放するようにした変更で、バッファの追加が必要
な時にもエラー扱いでループを抜けてしまっていたのを修正しています。
[ruby-core:45733] [Feature #6615]
