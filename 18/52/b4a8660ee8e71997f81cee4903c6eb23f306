標準添付されている拡張ライブラリで文字列を C の文字列として処理する時に文字列の
途中に NUL 文字が含まれているとまずいので StringValueCStr() を使ってチェックし
て(さらに末尾を NUL 文字で終端するようにする)、また rb_check_safe_obj() で
TAINTED フラグもチェックするようにしています。文字列オブジェクトの NUL 終端をや
めるの、Ruby 3.0 では入るのかなぁ(拡張ライブラリが動かなくなる可能性があるので
なかなか難しい)。 [ruby-dev:50267] [Bug #13953]
