File::CLOEXEC のテストの ensure 節の後始末で nil チェックを追加しています。
