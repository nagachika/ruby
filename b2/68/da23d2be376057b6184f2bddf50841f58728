拡張ライブラリ zlib の Zlib.gunzip でメモリリークが発生しているのを修正していま
す。差分をみると構造体をオブジェクトで wrap するようにして、最後に DATA_PTR()
をクリアしているので、例外発生時にリークしていたのをオブジェクトに wrap するこ
とで GC にまかせるようにする手法かなと思ったのですが、正常終了時にもリークして
いたみたいなので、gz->end() がメモリ解放を含んでいて、そもそも解放処理がまった
く行なわれていなかった気がします。 [ruby-core:83162] [Bug #13982]
