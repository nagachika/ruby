VM スタックの初期化処理を main thread 以外の時は vm.c の th_init() から thread_start_func_2() で実際に thread が起動される時に移動しています。これ同じ処理が 2箇所に分かれてしまうんだけどなぜだろう。と思ったのですが後のほうのを読んでここで VM スタックの確保を alloca() にしている、つまり VM スタックをマシンスタック上に確保するようにしている、というのが本質だとわかりました。
