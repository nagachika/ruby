標準ライブラリ csv でコメント行として扱う文字を指定する :skip_lines オプション
に文字列が渡された時に Regexp に変換(コンパイル)して使うようにしています。これ
までも String を渡したら String#match が呼ばれていたのだと思いますが、このメソ
ッドだと引数の方を pattern とするのでマッチせずに動作しなかったのだと思います。
ただ、今の実装だとエスケープせずに Regexp.new に渡しているので、たとえば
skip_lines: "." のような指定をすると任意の文字がコメント行の指定になってしまっ
てデータが取れなくなるので Regexp.escape したほうがいいんじゃないと思います。と
いうことでチケットを作ろうと思ったのですが bugs.ruby-lang.org が Internal
Server Error を返しているので作れず……。
