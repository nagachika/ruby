IO#write などの書き込む文字列を freeze した String オブジェクトを生成してから書
き込むようにしていましたが(多分書き込み途中の String オブジェクトの操作によるバ
ッファの変更の影響を避けるため)、その後で do_writeconv() で文字列の Encoding 変
換が行なわれる可能性があるため、そこまで freeze するのを遅延して、変換が行なわ
れなかった時だけ freeze するようにしています。変換された時に freeze しないよう
にしているのはなぜかなぁ。多分変換時に別の String オブジェクトを作っているから
だと思いますが ObjectSpace.each_object まで考慮するとこの時も freeze はしたほう
が良いような気も。あと変換が行われるケースで Frozenエラーが起きていたのではない
かと思うのですがそのテストケースも欲しいですね。
