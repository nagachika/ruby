ついでに singleton_class_of() の条件分岐を整理するリファクタリングをしています
。
