r50457 で Enumerable#to_a で size で整数以外を返すクラスに Enumerable を
include していると to_a が例外を返すようになっていたので、整数が返ってきた時だ
け capa の指定に使うようにしています。ただ size の実装が to_a を使うようになっ
ていると無限再帰になるという指摘もあるのでまだ問題ありそうですね。
[ruby-dev:48959] [Bug #11130]
