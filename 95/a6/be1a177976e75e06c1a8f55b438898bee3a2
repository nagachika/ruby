Rails で HTTP パラメータをパースするところで binary (ASCII-8BIT) の文字列を
default_internal を UTF-8 に設定して encode すると readbyte の結果が変化すると
いう 2.0.0 からの変化があるそうで画像などバイナリデータが壊れるという問題がある
そうです。バイナリデータを encode しているのでまあ変化するのは当然ではあるので
すが、workaround として encode で :replace オプションを明示的に指定しない時には
変換先のエンコーディングにとって不正なバイト列も変更しないでそのまま通すように
しています。
