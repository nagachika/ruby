[ruby-core:34844] で投稿されたように、ALLOCA_N() を用いてスタック上にメモリを確
保する場合、あまり長い文字列などを確保しようとするとスタックオーバフローを引き
起こすのですが、ヒープから取得すると例外発生時に解放漏れの原因になります。リー
クしないように String オブジェクトで包んでGCされるようにするようにしないといけ
ないので、一時バッファ用の String オブジェクトを生成/バッファ破棄する
rb_alloc_tmp_buffer()/rb_free_tmp_buffer() を追加し、さらに確保するサイズがあま
り大きくない場合は alloca でスタック上に確保し、大きい時だけこの一時オブジェク
トを利用するマクロ ALLOCV/ALLOCV_N と解放用の ALLOCV_END を追加しています。使い
方は次のコミット参照。
