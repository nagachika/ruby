compile.c の iseq_peephole_optimize() でコンパイルした VM 命令列の最適化時に
freezestring 命令の次に send 命令があったら、すぐに dup されてしまうので
freezestring 命令を削除して fstring の確保をスキップするようにしています。うー
んコメントなどをみるに String#+@ の呼び出しの時に dup されるから…というふうに
みえるのですが、引数がない send ということまでしかチェックしてなくて +@ メソッ
ドであるということはみていないですね。これでいいのかな? 無引数のメソッドの
receiver が常に dup されるってことはないですよね。
