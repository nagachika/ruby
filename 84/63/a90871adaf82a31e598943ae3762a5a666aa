include/ruby/io.h の FMODE_WSPLIT と FMODE_WSPLIT_INITIALIZED という FMODE を削
除しています。ちょっとこんな実装があったの知らなかったのですが、 1.8 の時代のグ
リーンスレッド実装の時に write() でブロックしてプロセス全体が固まるのを防ぐため
に、IO が通常のファイルでなく、O_NONBLOCK でもない時にこの FMODE をセットして、
一度に書き込むサイズを PIPE_BUF までに制限するようにしていました。今は write(2)
を呼ぶのは GVL を開放した後なので、この制限は不要ということで削除されています。
