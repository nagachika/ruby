r55770 の変更が OS X で暗黙の long -> int の変換でエラーになっていたのを修正し
ています。昨日 r55770 の変更は戻り値を 0 か 1 に丸めてるって書きましたけど逆で
、条件部の値をそのまま返すようにしてたのですね。それを revert しています。
