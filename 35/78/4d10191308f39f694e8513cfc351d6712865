defined? のための YARV の命令で super の定義の有無を判定するために、コンパイル
された iseq の中に格納されている method entry テーブルを見るのではなくて cfp の
ものを見るようにしています。define_method で定義されたメソッドの場合 iseq に埋
め込まれている情報は静的に決まってしまうので同じコードで別のメソッドが定義でき
る define_method を使った場合この情報を使うと期待と異なる結果になります。これも
define_method で定義したメソッドの defined?(super) の結果がおかしくなるという現
象の修正です。 [ruby-core:45831] [Bug #6644]
似たようなチケットがあったような気が。
