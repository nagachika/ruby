キーワード引数の分離にからんで rest 引数に渡す受け取った配列ブロック引数があったら dup するようにしています。ブロック引数を渡すところでその配列を pop した場合、実際に渡される配列はその pop される前のものになってたのが、2.7 の不要な dup を抑制する変更で(そっちのほうが自然ではあるような気もしますが) pop 後のものが渡されるように変化してたのを、元の挙動に戻すためのようです。うーむ。 [ruby-core:96769] [Bug #16500] [ruby-core:96798] [Bug #16504]
