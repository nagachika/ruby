rb_dir_getwd() を常に filesystem encoding でパスを返すようにして呼び出し元での
変換を削ったり、逆に変換しなおすようにしたりしています。
