Marshal.dump で marshal_dump メソッドが定義されていたオブジェクトの場合
marshal_dump を呼んだ結果のオブジェクトを dump するのですが、このときインスタン
ス変数は元のオブジェクトのものがそのまま出力されていたのを修正しています。とい
っても普通のクラスのオブジェクトでは marshal_dump が定義されていたらインスタン
ス変数はそのまま出力されず、Struct で生成したクラスを継承したクラスのオブジェク
トの時に出力されていたようで、その差がなぜ発生するのかがよくわかりません。
[ruby-core:51163] [Bug #7627]
またこの変更のため Complex と Rational はインスタンス変数を marshal_dump で返す
Array へインスタンス変数としてコピーするように変更しています。
