glibc では memcpy(3) に NULL を渡してはならないことになってるそうなので __GLIBC__ をチェックして必要なら空の配列の変数へのポインタを作ってそれを渡すようにしています。
