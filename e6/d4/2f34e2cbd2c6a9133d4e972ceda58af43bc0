スタックアドレスの取得について追加の修正です。 BSD 系の OS でも
pthread_attr_getstack() が使える場合はそちらを利用するようにしています。また
addr に size を足すかどうか(スタックが上に伸びるか下に伸びるか)をどちらにも対応
できるように STACK_DIR_UPPER() マクロを利用するようにしています。
