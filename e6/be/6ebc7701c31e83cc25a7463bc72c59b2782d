st_lookup() と st_insert() を同時に行う関数 st_update() でコールバック関数が
ST_CONTINUE を返してさらにキーが変更された時にエラー処理するようにしています。
元々 st_update() が導入された時はコールバック変数の key 引数は値渡しでしたが、
r35172 で st_update() で新しい要素を追加する時にキーを指定できるようにするため
ポインタで渡すようになったので、このポインタの指す先を変更しつつ新規追加ではな
い時に key を書き換えるようにしています。ただし st_table のキーとして同一視でき
ないようなキーが返された時(hash値が異なるかテーブル毎の compare() 関数で比較し
て同一でない)はエラーにしています。これは 2.1 にも必要かなぁ。 2.0.0 はどうです
かね。ぎりぎり入ってないかも。
