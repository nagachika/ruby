標準添付ライブラリの WEBrick で send_body に渡すレスポンスが IO オブジェクトか
String を渡すようになっていましたが、クラスをチェックするのではなくて
readpartial が呼べるかどうかをチェックする duck typing に変更して StringIO など
を渡すこともできるようにしています。コミットログや NEWS には read も呼べるかチ
ェックするようなことが書かれていますが実際には readpartial だけチェックしていま
すね。 StringIO で渡すなら String そのまま渡せばいいんじゃないかと一瞬思いまし
たが、ストリーミングする時に使いたいみたいですね。 [ruby-core:53665] [Feature #
8155]
