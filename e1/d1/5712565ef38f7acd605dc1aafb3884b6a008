msg が nil の時の条件を追加しています。が、これでも不完全で、nil が明示的に渡さ
れたのか省略された結果 nil が入ったのかを区別しないといけないです。
