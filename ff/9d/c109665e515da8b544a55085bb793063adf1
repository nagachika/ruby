TracePoint の C API 用のテストの拡張ライブラリで Proc オブジェクトを Module のインスタンス変数に保持してたのをやめています。ちょっとよくわからないのですが GC.compact 絡みでこの拡張ライブラリの実装方法はよくなかったということみたいですね。そのかわりに呼び出す ruby スクリプトのほうでローカル変数に Proc オブジェクトを格納しておくようにしています。しかしこれダメなのかな。
