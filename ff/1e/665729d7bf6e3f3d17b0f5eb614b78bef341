IO.select でイベントの検出漏れがないか確認するテストが繰り返し Thread を生成す
るため非常に重いので、 Thread は使いまわすように書きかえて、かわりにループ回数
を増やしています。ついでに(?) MALLOC_ARENA_MAX などの環境変数も設定してメモリ使
用量を抑えるようにしているようです。
