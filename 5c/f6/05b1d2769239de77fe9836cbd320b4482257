[Bug #3490]
rb_big2long, rb_big2ulong でキャストの変更されています。VALUE 型が long とバイ
ト幅が違うような環境のことをケアしているものです。
コミットメッセージをそのまま読むと、rb2ulong は VALUE を返すけど、その実際の範
囲は ulong なので、VALUE 型が ulong よりもバイト幅が大きい時は、負の数を返して
いるつもりでも上位ビットは常に0になるから long にキャストする、ということだそう
です。ulong の範囲なのに負の数? とちょっと疑問ですが、要は Bignum が ulong にお
さまりきらない範囲の数だった時にオーバフローを検出するためのようです。難しいで
すね。
今日は読み応えのある修正がいっぱいありました。
