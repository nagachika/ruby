marshal.c の r_entry0() で st_lookup() でみつからなかった時のデフォルト値をあらかじめ st_lookup() の第3引数にポインタを渡す変数にセットしておくようにして Qundef で埋めておくのをやめています。 st_lookup() は要素がみつからなかった時に第3引数の内容を書きかえたりはしないのでこれで良いみたいです。
