r45913 で rb_thread_t の内部的な管理構造を st_table から doubly linked list に
したので、全スレッドに対する処理を行う関数がコールバックを受けとる方法で書かれ
ているのを list_for_each() マクロを利用してその場でループっぽく書けるようになっ
たのでリファクタリングしています。 [ruby-core:62745]
