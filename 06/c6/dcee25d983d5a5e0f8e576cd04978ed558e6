r43469 の再修正/リファクタリング。文字列がバイナリかどうか判定する binary? で利
用する文字列などを定数化して一時オブジェクトを作らないようにしています。
