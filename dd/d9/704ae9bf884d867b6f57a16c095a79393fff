Encoding の変換テーブルを生成する時に? XML 向けのエンコードでシングルクオートを &apos; に置き換えるようにしています。知らなかったのですが Strig#encode にキーワード引数 xml で XML 向けのエンコード(エスケープ?)をする機能があったんですね。 [ruby-core:98576] [Bug #16922]
