gc.c の WeakMap の mark 処理関数 wmap_mark() で obj2wmap という構造体メンバを問
答無用で利用していたのを NULL チェックをするようにしています。おそらくここのメ
モリ確保する前に GC が走ることがあるので、その時に SEGV で落ちてしまうというこ
とでしょう。
