c71109355987f290257e977c1634db6328916786 の socket のテストでポート番号をランダムに決める random_port を test/socket/test_socket.rb で定義されてるものだけ変更してましたが e9974a466ac7edcb8035f5f7bc65c4c6731e2ee2 も同様に変更するようにしています。また test/socket/test_socket.rb のほうの errors_addrinuse で mingw の時に許容する例外に Errno::EACCESS を追加するようにしています。なんだけど test/socket/test_socket.rb の errors_addrinuse では既に mingw で追加されてた(けど arton さんのところでエラーになった)ということは mswin の時も追加したほうが良いんじゃないかな。 [ruby-dev:42661]
