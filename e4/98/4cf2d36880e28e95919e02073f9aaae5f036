r51080 の配列サイズを int で受けるようにしたのを revert して明示的なキャストを
追加するようにしています。はて、まあどっちでもいいような気はしますが一応
RARRAY_LENINT() だとオーバフローチェックが入るぶん安全な気がしますが、なんでで
しょうね。
[追記]mask を int にしてもそこから先でまた暗黙の型変換があったからだそうです。
[/追記]
