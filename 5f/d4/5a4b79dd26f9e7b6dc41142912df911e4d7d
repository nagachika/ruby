URI() が返す http スキームの URI オブジェクトに hostname というメソッドを新設し
ています。元々 host というメソッドは存在しているのですが、ホスト名の部分にIPv6
のアドレス表現を利用する時に問題になるみたいです。
軽く検索してみると、rfc2732 で IPv6 を URI に含める時の規格が定められているらし
く、それによるとたとえば ::1 という IPv6 のアドレスを使う時には http://[::1]/
のようにアドレスを [ と ] で括らないといけないそうです。
URI#host はこの部分を [ ] 付きで取り出します。それをそのまま TCPSocket 等に渡す
とエラーになってしまうので、[ ] を取り除いて取り出すためのメソッドとして
hostname を定義しているということのようです。 IPv6 を意識したアプリケーションを
書く時には URI の扱いには気をつけないといけませんね。
