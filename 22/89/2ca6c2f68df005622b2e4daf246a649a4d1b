sprintf.c の rb_str_format() で Float のデフォルトの精度 6 を関数の冒頭で enum
で定義しておいて使うようにして、マジックナンバー化を避けています。あと変数 need
が意味ありげに 6 で初期化されていましたがこれは使われてなかったので初期化自体を
消しています。
