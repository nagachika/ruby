Ruby では組み込みクラスの hash メソッドはインタプリタを実行する度に同じ値のオブ
ジェクトであっても異なる値を返すようになっていたのですが、r56650 のハッシュテー
ブルの実装の最適化以降同じ値のオブジェクトは同じ hash 値を返すようになっていた
ため、DoS 攻撃の対象になりうるのでセキュリティ上望ましくないということで修正し
ています。新しい実装もその点を無視していたわけではなくて、衝突が多く発生したら
DoS 攻撃を検出して「強いハッシュ関数」を利用するようにテーブル毎にモードを切り
替えるような実装をしていたのですが、途中で Hash に使うハッシュ値が変わるのは弊
害が多いということでこの仕組みはやめて、常に強いハッシュ関数を利用するようにし
ています。 [ruby-core:78490] [Bug #13002]
