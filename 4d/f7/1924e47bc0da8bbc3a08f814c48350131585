Psych.dump で対象のオブジェクトの method メソッドが Object#method から上書きさ
れていると(Struct.new(:method) のインスタンスとか)誤ってそのメソッドを呼んでし
まって意図しない動作になるのを修正。 [ruby-core:35255] [Bug #4401]
ここで Object#method を使って to_yaml メソッドのソース位置を取得するのは警告メ
ッセージのためなので駄目だったら諦めるよーというような方針の変更になっているの
ですが、例外が発生するのは一例なので、チケットで提案されているような修正のほう
がいいんじゃないだろうか。とはいえ method(:to_yaml).source_location までのセッ
トで例外にもならずにおかしな結果になる例というのもちょっと考えにくいのでまあ実
害はないかも。
