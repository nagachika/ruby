r43585 で追加された ObjectSpace.dump_all のインタフェースを修正しています。
:file オプションに IO オブジェクトを直接渡すこともできるようにしています。また
ファイルの指定がない時に一時ファイルを作成するのに mkstemp(3) を使っていたのを
標準添付ライブラリ tempfile の機能を使って作成するようにしています。 mkstemp()
で作ると fd に close-on-exec フラグがつかないので fd leak のおそれがあるため。
[ruby-core:58266] [Bug #9102]
