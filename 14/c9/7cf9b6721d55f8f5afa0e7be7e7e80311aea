コンパイラが clang の時は -fno-defer-pop というオプションをコンパイル時につけず
リンク時のみに付けるようにしています。 -fno-defer-pop は関数呼び出しから戻った
時にすぐ引数をスタックから pop するようにするというものです。 clang はコンパイ
ル時に指定されると警告メッセージをだしてしまうそうですが、pop の遅延をしていな
いんでしょうかね。
