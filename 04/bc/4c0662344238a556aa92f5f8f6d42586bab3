String オブジェクトは freeze するともうバッファを変更しなくなるので、(バッファをヒープに確保している場合) capa を実際のサイズ(+終端の NUL 文字ぶん)のサイズに切り詰めるということをしていて、rb_fstring() で(String#@- で) fstring 化した時にこのバッファの切り詰め処理が行なわれていなかったのでここでもするようにしています。 https://github.com/ruby/ruby/pull/2256
