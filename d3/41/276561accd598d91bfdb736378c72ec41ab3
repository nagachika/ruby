Mac OS X では IPv6 に関するソケットオプションが __APPLE_USE_RFC_3542 というマク
ロを定義した上でヘッダを #include しないと利用できなかったそうで、darwin 上では
拡張ライブラリ socket の extconf.rb でのマクロを定義するコンパイラオプションを
追加するようにしています。 [ruby-core:55453] [Bug #8517]
