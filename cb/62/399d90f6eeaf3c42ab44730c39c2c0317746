gc.c に atomic_sub_nounderflow() という ATOMIC_SIZE_CAS() を使って atomic に減
算処理を行う関数を追加して、メモリ管理で malloc した領域の計算に同様の処理を書
いていたところをこれを利用するように置き換えています。またこの関数は減算の結果
アンダーフローしてしまう場合は減算しないようにしています。これ sub を 0 にして
いるということは ATOMIC_SIZE_CAS() も実行する必要がないので val < sub の時はす
ぐ return すればいいんじゃないでしょうか。または sub = val (アンダーフロー時は
0 に丸める)の間違い?
