Array#join で引数を文字列に変換するために to_str を呼び出した時に ruby レベルのメソッドに処理が移る場合があるので、その後で配列の内容が変化されて文字列じゃなくなっていた場合に SEGV したりする可能性があったので修正しています。
