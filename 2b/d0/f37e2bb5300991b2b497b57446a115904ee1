dir.c の glob_opendir() で goto でジャンプするエラー処理を関数末尾に移動するためブロックの外に出しています。
