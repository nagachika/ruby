include/ruby/assert.h の RUBY_ASSERT_FAIL() マクロの展開時に引数を #expr で文字列化するのではなく、引数にそもそもメッセージに入れる文字列リテラルを書かせるように変更しています。使ってるところ一箇所しかなかったようですね。
