r37776 で rb_cstr_to_inum() が文字列から整数をパースする時に連続するアンダース
コアでの桁区切りを許容しないように戻されたので Rational() の処理から
rb_cstr_to_inum() に渡す文字列をその制限に合わせてコピーして整形して渡すように
しています。
