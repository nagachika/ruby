d8fd92f62024d85271a3f1125bc6928409f912e1 や ffdf0232efd4955a234955c8372885b850fcfe33 で標準添付ライブラリ rdoc で psych の仕様変更に伴なって .rdoc_options を読み込むのに YAML.unsafe_load_file を使ったり YAML.load_file に戻して permitted_classes キーワード引数を追加したりしていたのの続きで、permitted_classes を使うため YAML.load_file のかわりに File.read で読み込んでから YAML.safe_load でロードするようにしています。 psych が古いと load_file は unsafe_load_file の alias なので permitted_classes がないからだと思いますが、YAML.safe_load_file にも permitted_classes はあるからそっちでもいいような気がするけど、古い psych だとないとかかなぁ。
