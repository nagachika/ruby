Ruby の条件文には flip-flop 条件式(というのかな? 実は正式になんというのか知りま
せん。 flip-flop 演算子と言っているのをみたこともあるような気がするけど、演算子
ではないと思う)というのがあって、条件文が求められている所に範囲式(start..end み
たいなの)が書かれていると、その start が真になったら次に end が真になるまでの間
真に、end が真になったら今度は start が真になるまで偽になり続けるという、状態を
隠し持っている条件文が書けます。そいつの実装を変更しています。これまでの実装で
は特殊変数を Hash として保持して、flip-flop 用のキーを内部的な String オブジェ
クトを持っていたのですが、それが表に現れてしまうことがあるらしい(この理由はよく
わかりません)ので、特殊変数を配列を使って格納するようにしてキーを不要にしている
みたいです。 [ruby-core:47253] [Bug #6899]
