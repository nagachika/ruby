Marshal.dump の方法をカスタマイズするために marshal_dump メソッドを定義している場合にそのメソッド内でインスタンス変数を追加する副作用のあることをすると不正なバイナリを吐いてしまい load 時にオブジェクトが化けるということがあるので、インスタンス変数の数が途中で変わったら例外を発生させるようにしています。 [ruby-core:93445] [Bug #15968]
