test/ruby/envutil.rb の invoke_ruby で子プロセスの終了待ちがタイムアウトした時
にメッセージとバックトレースを設定して例外を発生させるようにしています。
